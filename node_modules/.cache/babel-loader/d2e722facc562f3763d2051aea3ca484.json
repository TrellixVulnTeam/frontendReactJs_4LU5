{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/chaki/OneDrive/Desktop/aymenouerghui/frontendReactJs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/chaki/OneDrive/Desktop/aymenouerghui/frontendReactJs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:/Users/chaki/OneDrive/Desktop/aymenouerghui/frontendReactJs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\chaki\\\\OneDrive\\\\Desktop\\\\aymenouerghui\\\\frontendReactJs\\\\src\\\\user\\\\components\\\\screens\\\\PrivateScreen.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Header from '../Header';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { fetchconnectuser, selectoneuser, selectSessionUser } from \"../../../redux/slices/userSlice\";\nimport AddPost from '../Post/AddPost';\nimport PostItem from '../Post/PostItem';\nimport { deletePost, getPosts } from \"../../../redux/actions/postAction\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar PrivateScreen = function PrivateScreen(_ref) {\n  _s();\n\n  var history = _ref.history;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      error = _useState2[0],\n      setError = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      privateData = _useState4[0],\n      setPrivateData = _useState4[1];\n\n  useEffect(function () {\n    if (!localStorage.getItem(\"authToken\")) {\n      history.push(\"/login\");\n    }\n\n    var fetchPrivateData = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var config, _yield$axios$get, data;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                config = {\n                  headers: {\n                    \"Content-Type\": \"appliation/json\",\n                    Authorization: \"Bearer \".concat(localStorage.getItem(\"authToken\"))\n                  }\n                };\n                _context.prev = 1;\n                _context.next = 4;\n                return axios.get(\"https://aaweni.herokuapp.com/api/private\", config);\n\n              case 4:\n                _yield$axios$get = _context.sent;\n                data = _yield$axios$get.data;\n                setPrivateData(data.data);\n                _context.next = 13;\n                break;\n\n              case 9:\n                _context.prev = 9;\n                _context.t0 = _context[\"catch\"](1);\n                localStorage.removeItem(\"authToken\");\n                setError(\"You are not authorized please login !!\");\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[1, 9]]);\n      }));\n\n      return function fetchPrivateData() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    fetchPrivateData();\n  }, [history]);\n  var dispatch = useDispatch();\n  useEffect(function () {\n    dispatch(fetchconnectuser());\n  }, [dispatch]);\n  var user = useSelector(selectSessionUser)[0];\n  localStorage.setItem(\"role\", user.role);\n  localStorage.setItem(\"connecteduser\", user._id);\n\n  var logoutHandler = function logoutHandler() {\n    localStorage.removeItem(\"authToken\");\n    history.push(\"/login\");\n  };\n\n  useEffect(function () {\n    dispatch(getPosts());\n  }, [dispatch]);\n  var posts = useSelector(function (state) {\n    return state.postReducer.posts;\n  });\n  return error ? /*#__PURE__*/_jsxDEV(\"span\", {\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 9\n  }, _this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"body\", {\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 5\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"main_content\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"mcontainer\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"lg:flex lg:space-x-10\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"lg:w-3/4 lg:px-20 space-y-7\",\n              children: [/*#__PURE__*/_jsxDEV(AddPost, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 69,\n                columnNumber: 15\n              }, _this), posts.map(function (post, index) {\n                return /*#__PURE__*/_jsxDEV(PostItem, {\n                  post: post\n                }, post._id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 71,\n                  columnNumber: 24\n                }, _this);\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 13\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 11\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 9\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 7\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 8\n    }, _this)\n  }, void 0, false);\n};\n\n_s(PrivateScreen, \"u2C8mlWFd34WPNzAT7ricnIE/fw=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c = PrivateScreen;\nexport default PrivateScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"PrivateScreen\");","map":{"version":3,"sources":["C:/Users/chaki/OneDrive/Desktop/aymenouerghui/frontendReactJs/src/user/components/screens/PrivateScreen.js"],"names":["React","useState","useEffect","axios","Header","useDispatch","useSelector","fetchconnectuser","selectoneuser","selectSessionUser","AddPost","PostItem","deletePost","getPosts","PrivateScreen","history","error","setError","privateData","setPrivateData","localStorage","getItem","push","fetchPrivateData","config","headers","Authorization","get","data","removeItem","dispatch","user","setItem","role","_id","logoutHandler","posts","state","postReducer","map","post","index"],"mappings":"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","sourcesContent":["import React,{useState , useEffect} from 'react';\r\nimport axios from 'axios';\r\nimport Header from '../Header';\r\nimport { useDispatch ,useSelector} from 'react-redux';\r\nimport {fetchconnectuser,selectoneuser,selectSessionUser} from \"../../../redux/slices/userSlice\";\r\nimport AddPost from '../Post/AddPost';\r\nimport PostItem from '../Post/PostItem';\r\nimport { deletePost, getPosts } from \"../../../redux/actions/postAction\";\r\nconst PrivateScreen = ({history}) => {\r\n    const [error, setError]= useState(\"\");\r\n    const [privateData, setPrivateData]= useState(\"\");\r\n\r\n\r\n    useEffect(() => {\r\n        if(!localStorage.getItem(\"authToken\")){\r\n            history.push(\"/login\")\r\n        }\r\n\r\n        const fetchPrivateData = async () =>{\r\n            const config = {\r\n                headers: {\r\n                    \"Content-Type\":\"appliation/json\",\r\n                    Authorization: `Bearer ${localStorage.getItem(\"authToken\")}`\r\n                }\r\n            }\r\n\r\n            try {\r\n                const {data} = await axios.get(\"https://aaweni.herokuapp.com/api/private\",config);\r\n                setPrivateData(data.data);\r\n            } catch (error) {\r\n                localStorage.removeItem(\"authToken\");\r\n                setError(\"You are not authorized please login !!\")\r\n            }\r\n        }\r\n        fetchPrivateData();\r\n    },[history]);\r\nconst dispatch = useDispatch();\r\n\r\n useEffect(() => {\r\n        dispatch(fetchconnectuser());\r\n        }, [dispatch]);\r\n        const user=useSelector(selectSessionUser)[0];\r\n      \r\n        localStorage.setItem(\"role\" , user.role);\r\n       localStorage.setItem(\"connecteduser\" , user._id);\r\n    const logoutHandler = () => {\r\n        localStorage.removeItem(\"authToken\");\r\n        history.push(\"/login\");\r\n    };\r\n\r\n    useEffect(() => {\r\n      dispatch(getPosts());\r\n    }, [dispatch]);\r\n    const posts = useSelector((state) => state.postReducer.posts);\r\n    return error ? (\r\n        <span>{error}</span>\r\n    ) : (\r\n        <>\r\n      {/**  \r\n       <div style={{ background: \"green\", color: \"white\" }}>{privateData.map(home => <div>{home.data}</div>)}</div>\r\n       <button onClick={logoutHandler}>Logout</button>\r\n       */} \r\n       <body>\r\n    <Header />\r\n      <div class=\"main_content\">\r\n        <div class=\"mcontainer\">\r\n          <div class=\"lg:flex lg:space-x-10\">\r\n            <div class=\"lg:w-3/4 lg:px-20 space-y-7\">\r\n              <AddPost></AddPost>\r\n              {posts.map((post, index) => {\r\n                return <PostItem post={post} key={post._id} />;\r\n              })}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </body>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default PrivateScreen;\r\n"]},"metadata":{},"sourceType":"module"}