{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar React = require('react');\n\nvar core = require('@react-pdf-viewer/core');\n\nvar reactDom = require('react-dom');\n\nfunction _interopNamespace(e) {\n  if (e && e.__esModule) return e;\n  var n = Object.create(null);\n\n  if (e) {\n    Object.keys(e).forEach(function (k) {\n      if (k !== 'default') {\n        var d = Object.getOwnPropertyDescriptor(e, k);\n        Object.defineProperty(n, k, d.get ? d : {\n          enumerable: true,\n          get: function () {\n            return e[k];\n          }\n        });\n      }\n    });\n  }\n\n  n['default'] = e;\n  return Object.freeze(n);\n}\n\nvar React__namespace = /*#__PURE__*/_interopNamespace(React);\n\nvar PrintIcon = function () {\n  return React__namespace.createElement(core.Icon, {\n    size: 16\n  }, React__namespace.createElement(\"path\", {\n    d: \"M7.5,19.499h9 M7.5,16.499h9 M5.5,16.5h-3c-1.103-0.003-1.997-0.897-2-2v-6c0.003-1.103,0.897-1.997,2-2h19\\n                c1.103,0.003,1.997,0.897,2,2v6c-0.003,1.103-0.897,1.997-2,2h-3\\n                M5.5,4.5v-4h9.586c0.265,0,0.52,0.105,0.707,0.293l2.414,2.414\\n                C18.395,3.394,18.5,3.649,18.5,3.914V4.5\\n                M18.5,22.5c0,0.552-0.448,1-1,1h-11c-0.552,0-1-0.448-1-1v-9h13V22.5z\\n                M3.5,8.499\\n                c0.552,0,1,0.448,1,1s-0.448,1-1,1s-1-0.448-1-1S2.948,8.499,3.5,8.499z\\n                M14.5,0.499v4h4\"\n  }));\n};\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar TOOLTIP_OFFSET = {\n  left: 0,\n  top: 8\n};\n\nvar PrintButton = function (_a) {\n  var onClick = _a.onClick;\n  var l10n = React__namespace.useContext(core.LocalizationContext);\n  var label = l10n && l10n.print ? l10n.print.print : 'Print';\n  return React__namespace.createElement(core.Tooltip, {\n    position: core.Position.BottomCenter,\n    target: React__namespace.createElement(core.Button, {\n      onClick: onClick\n    }, React__namespace.createElement(PrintIcon, null)),\n    content: function () {\n      return label;\n    },\n    offset: TOOLTIP_OFFSET\n  });\n};\n\nvar PrintStatus;\n\n(function (PrintStatus) {\n  PrintStatus[\"Inactive\"] = \"Inactive\";\n  PrintStatus[\"Preparing\"] = \"Preparing\";\n  PrintStatus[\"Cancelled\"] = \"Cancelled\";\n  PrintStatus[\"Ready\"] = \"Ready\";\n})(PrintStatus || (PrintStatus = {}));\n\nvar PrintStatus$1 = PrintStatus;\n\nvar Print = function (_a) {\n  var children = _a.children,\n      store = _a.store;\n\n  var print = function () {\n    store.update('printStatus', PrintStatus$1.Preparing);\n  };\n\n  var defaultChildern = function (props) {\n    return React__namespace.createElement(PrintButton, {\n      onClick: props.onClick\n    });\n  };\n\n  var render = children || defaultChildern;\n  return render({\n    onClick: print\n  });\n};\n\nvar PrintProgress = function (_a) {\n  var numLoadedPages = _a.numLoadedPages,\n      numPages = _a.numPages,\n      onCancel = _a.onCancel,\n      onStartPrinting = _a.onStartPrinting;\n  var l10n = React__namespace.useContext(core.LocalizationContext);\n  var progress = Math.floor(numLoadedPages * 100 / numPages);\n  React__namespace.useEffect(function () {\n    if (numLoadedPages === numPages) {\n      onStartPrinting();\n    }\n  }, [numLoadedPages]);\n  return React__namespace.createElement(\"div\", {\n    className: 'rpv-print-progress'\n  }, React__namespace.createElement(\"div\", {\n    className: 'rpv-print-progress-inner'\n  }, React__namespace.createElement(\"div\", {\n    className: 'rpv-print-progress-message'\n  }, l10n && l10n.print ? l10n.print.preparingDocument : 'Preparing document ...'), React__namespace.createElement(\"div\", {\n    className: 'rpv-print-progress-bar'\n  }, React__namespace.createElement(core.ProgressBar, {\n    progress: progress\n  })), React__namespace.createElement(core.PrimaryButton, {\n    onClick: onCancel\n  }, l10n && l10n.print ? l10n.print.cancel : 'Cancel')));\n};\n\nvar PageThumbnail = function (_a) {\n  var page = _a.page,\n      pageHeight = _a.pageHeight,\n      pageWidth = _a.pageWidth,\n      rotation = _a.rotation,\n      onLoad = _a.onLoad;\n  var renderTask = React__namespace.useRef();\n\n  var _b = React__namespace.useState(''),\n      src = _b[0],\n      setSrc = _b[1];\n\n  React__namespace.useEffect(function () {\n    var task = renderTask.current;\n\n    if (task) {\n      task.cancel();\n    }\n\n    var canvas = document.createElement('canvas');\n    var printUnit = 150 / 72;\n    canvas.height = Math.floor(pageHeight * printUnit);\n    canvas.width = Math.floor(pageWidth * printUnit);\n    var canvasContext = canvas.getContext('2d');\n    canvasContext.save();\n    canvasContext.fillStyle = 'rgb(255, 255, 255)';\n    canvasContext.fillRect(0, 0, canvas.width, canvas.height);\n    canvasContext.restore();\n    var viewport = page.getViewport({\n      rotation: rotation,\n      scale: 1\n    });\n    renderTask.current = page.render({\n      canvasContext: canvasContext,\n      intent: 'print',\n      transform: [printUnit, 0, 0, printUnit, 0, 0],\n      viewport: viewport\n    });\n    renderTask.current.promise.then(function () {\n      'toBlob' in canvas ? canvas.toBlob(function (blob) {\n        setSrc(URL.createObjectURL(blob));\n      }) : setSrc(canvas.toDataURL());\n    }, function () {});\n  }, []);\n  return !src ? React__namespace.createElement(core.Spinner, null) : React__namespace.createElement(\"div\", {\n    className: 'rpv-print-page-thumbnail',\n    style: {\n      height: Math.floor(pageHeight * 96 / 72) + \"px\",\n      width: Math.floor(pageWidth * 96 / 72) + \"px\"\n    }\n  }, React__namespace.createElement(\"img\", {\n    src: src,\n    style: {\n      height: Math.floor(pageHeight * 96 / 72) + \"px\",\n      width: Math.floor(pageWidth * 96 / 72) + \"px\"\n    },\n    onLoad: onLoad\n  }));\n};\n\nvar PageThumbnailContainer = function (_a) {\n  var doc = _a.doc,\n      pageHeight = _a.pageHeight,\n      pageIndex = _a.pageIndex,\n      pageWidth = _a.pageWidth,\n      rotation = _a.rotation,\n      onLoad = _a.onLoad;\n\n  var _b = React__namespace.useState({\n    height: pageHeight,\n    page: null,\n    viewportRotation: 0,\n    width: pageWidth\n  }),\n      pageSize = _b[0],\n      setPageSize = _b[1];\n\n  var page = pageSize.page,\n      height = pageSize.height,\n      width = pageSize.width;\n  var isVertical = Math.abs(rotation) % 180 === 0;\n  React__namespace.useEffect(function () {\n    doc.getPage(pageIndex + 1).then(function (pdfPage) {\n      var viewport = pdfPage.getViewport({\n        scale: 1\n      });\n      setPageSize({\n        height: viewport.height,\n        page: pdfPage,\n        viewportRotation: viewport.rotation,\n        width: viewport.width\n      });\n    });\n  }, []);\n  var rotationNumber = (rotation + pageSize.viewportRotation) % 360;\n  return !page ? React__namespace.createElement(core.Spinner, null) : React__namespace.createElement(PageThumbnail, {\n    page: page,\n    pageHeight: isVertical ? height : width,\n    pageWidth: isVertical ? width : height,\n    rotation: rotationNumber,\n    onLoad: onLoad\n  });\n};\n\nvar PrintZone = function (_a) {\n  var doc = _a.doc,\n      pageHeight = _a.pageHeight,\n      pageWidth = _a.pageWidth,\n      printStatus = _a.printStatus,\n      rotation = _a.rotation,\n      onCancel = _a.onCancel,\n      onLoad = _a.onLoad;\n\n  var _b = React__namespace.useState(0),\n      numLoadedPages = _b[0],\n      setNumLoadedPages = _b[1];\n\n  React__namespace.useEffect(function () {\n    if (printStatus === PrintStatus$1.Ready) {\n      document.body.classList.add('rpv-body-printing');\n      window.print();\n    }\n\n    var handler = function () {\n      if (printStatus === PrintStatus$1.Ready) {\n        document.body.classList.remove('rpv-body-printing');\n        onCancel();\n      }\n    };\n\n    document.addEventListener('mousemove', handler);\n    return function () {\n      return document.removeEventListener('mousemove', handler);\n    };\n  }, [printStatus]);\n  var numPages = doc.numPages;\n\n  var loadPage = function () {\n    var total = numLoadedPages + 1;\n    setNumLoadedPages(total);\n    onLoad(total);\n  };\n\n  return reactDom.createPortal(React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(\"div\", {\n    className: 'rpv-print-zone'\n  }, Array(numPages).fill(0).map(function (_, index) {\n    return React__namespace.createElement(PageThumbnailContainer, {\n      key: index,\n      doc: doc,\n      pageHeight: pageHeight,\n      pageIndex: index,\n      pageWidth: pageWidth,\n      rotation: rotation,\n      onLoad: loadPage\n    });\n  })), React__namespace.createElement(\"style\", {\n    dangerouslySetInnerHTML: {\n      __html: \"\\n                            @supports ((size:A4) and (size:1pt 1pt)) {\\n                                @page { size: \" + pageWidth + \"pt \" + pageHeight + \"pt }\\n                            }\\n                        \"\n    }\n  })), document.body);\n};\n\nvar PrintContainer = function (_a) {\n  var doc = _a.doc,\n      pageHeight = _a.pageHeight,\n      pageWidth = _a.pageWidth,\n      rotation = _a.rotation,\n      store = _a.store;\n\n  var _b = React__namespace.useState(PrintStatus$1.Inactive),\n      printStatus = _b[0],\n      setPrintStatus = _b[1];\n\n  var _c = React__namespace.useState(0),\n      numLoadedPagesForPrint = _c[0],\n      setNumLoadedPagesForPrint = _c[1];\n\n  var cancelPrinting = function () {\n    setNumLoadedPagesForPrint(0);\n    setPrintStatus(PrintStatus$1.Inactive);\n  };\n\n  var startPrinting = function () {\n    setNumLoadedPagesForPrint(0);\n    setPrintStatus(PrintStatus$1.Ready);\n  };\n\n  var handlePrintStatus = function (status) {\n    return setPrintStatus(status);\n  };\n\n  React__namespace.useEffect(function () {\n    store.subscribe('printStatus', handlePrintStatus);\n    return function () {\n      store.unsubscribe('printStatus', handlePrintStatus);\n    };\n  }, []);\n  return React__namespace.createElement(React__namespace.Fragment, null, printStatus === PrintStatus$1.Preparing && React__namespace.createElement(PrintProgress, {\n    numLoadedPages: numLoadedPagesForPrint,\n    numPages: doc.numPages,\n    onCancel: cancelPrinting,\n    onStartPrinting: startPrinting\n  }), (printStatus === PrintStatus$1.Preparing || printStatus === PrintStatus$1.Ready) && React__namespace.createElement(PrintZone, {\n    doc: doc,\n    pageHeight: pageHeight,\n    pageWidth: pageWidth,\n    printStatus: printStatus,\n    rotation: rotation,\n    onCancel: cancelPrinting,\n    onLoad: setNumLoadedPagesForPrint\n  }));\n};\n\nvar isMac = /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform);\n\nvar ShortcutHandler = function (_a) {\n  var containerRef = _a.containerRef,\n      store = _a.store;\n\n  var keydownHandler = function (e) {\n    if (e.shiftKey || e.altKey || e.key !== 'p') {\n      return;\n    }\n\n    var isCommandPressed = isMac ? e.metaKey : e.ctrlKey;\n\n    if (!isCommandPressed) {\n      return;\n    }\n\n    var containerEle = containerRef.current;\n\n    if (!containerEle || !document.activeElement || !document.activeElement.contains(containerEle)) {\n      return;\n    }\n\n    e.preventDefault();\n    store.update('printStatus', PrintStatus$1.Preparing);\n  };\n\n  React__namespace.useEffect(function () {\n    var containerEle = containerRef.current;\n\n    if (!containerEle) {\n      return;\n    }\n\n    document.addEventListener('keydown', keydownHandler);\n    return function () {\n      document.removeEventListener('keydown', keydownHandler);\n    };\n  }, [containerRef.current]);\n  return React__namespace.createElement(React__namespace.Fragment, null);\n};\n\nvar printPlugin = function () {\n  var store = React__namespace.useMemo(function () {\n    return core.createStore({\n      printStatus: PrintStatus$1.Inactive\n    });\n  }, []);\n\n  var PrintDecorator = function (props) {\n    return React__namespace.createElement(Print, __assign({}, props, {\n      store: store\n    }));\n  };\n\n  var PrintButtonDecorator = function () {\n    return React__namespace.createElement(PrintDecorator, null, function (props) {\n      return React__namespace.createElement(PrintButton, __assign({}, props));\n    });\n  };\n\n  var renderViewer = function (props) {\n    var slot = props.slot;\n    var updateSlot = {\n      children: React__namespace.createElement(React__namespace.Fragment, null, React__namespace.createElement(ShortcutHandler, {\n        containerRef: props.containerRef,\n        store: store\n      }), React__namespace.createElement(PrintContainer, {\n        doc: props.doc,\n        pageHeight: props.pageHeight,\n        pageWidth: props.pageWidth,\n        rotation: props.rotation,\n        store: store\n      }), slot.children)\n    };\n    return __assign(__assign({}, slot), updateSlot);\n  };\n\n  return {\n    renderViewer: renderViewer,\n    Print: PrintDecorator,\n    PrintButton: PrintButtonDecorator\n  };\n};\n\nexports.PrintIcon = PrintIcon;\nexports.printPlugin = printPlugin;","map":{"version":3,"sources":["C:/Users/siwar/Desktop/front/node_modules/@react-pdf-viewer/print/lib/cjs/print.js"],"names":["Object","defineProperty","exports","value","React","require","core","reactDom","_interopNamespace","e","__esModule","n","create","keys","forEach","k","d","getOwnPropertyDescriptor","get","enumerable","freeze","React__namespace","PrintIcon","createElement","Icon","size","__assign","assign","t","s","i","arguments","length","p","prototype","hasOwnProperty","call","apply","TOOLTIP_OFFSET","left","top","PrintButton","_a","onClick","l10n","useContext","LocalizationContext","label","print","Tooltip","position","Position","BottomCenter","target","Button","content","offset","PrintStatus","PrintStatus$1","Print","children","store","update","Preparing","defaultChildern","props","render","PrintProgress","numLoadedPages","numPages","onCancel","onStartPrinting","progress","Math","floor","useEffect","className","preparingDocument","ProgressBar","PrimaryButton","cancel","PageThumbnail","page","pageHeight","pageWidth","rotation","onLoad","renderTask","useRef","_b","useState","src","setSrc","task","current","canvas","document","printUnit","height","width","canvasContext","getContext","save","fillStyle","fillRect","restore","viewport","getViewport","scale","intent","transform","promise","then","toBlob","blob","URL","createObjectURL","toDataURL","Spinner","style","PageThumbnailContainer","doc","pageIndex","viewportRotation","pageSize","setPageSize","isVertical","abs","getPage","pdfPage","rotationNumber","PrintZone","printStatus","setNumLoadedPages","Ready","body","classList","add","window","handler","remove","addEventListener","removeEventListener","loadPage","total","createPortal","Fragment","Array","fill","map","_","index","key","dangerouslySetInnerHTML","__html","PrintContainer","Inactive","setPrintStatus","_c","numLoadedPagesForPrint","setNumLoadedPagesForPrint","cancelPrinting","startPrinting","handlePrintStatus","status","subscribe","unsubscribe","isMac","test","navigator","platform","ShortcutHandler","containerRef","keydownHandler","shiftKey","altKey","isCommandPressed","metaKey","ctrlKey","containerEle","activeElement","contains","preventDefault","printPlugin","useMemo","createStore","PrintDecorator","PrintButtonDecorator","renderViewer","slot","updateSlot"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar React = require('react');\nvar core = require('@react-pdf-viewer/core');\nvar reactDom = require('react-dom');\n\nfunction _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = Object.create(null);\n    if (e) {\n        Object.keys(e).forEach(function (k) {\n            if (k !== 'default') {\n                var d = Object.getOwnPropertyDescriptor(e, k);\n                Object.defineProperty(n, k, d.get ? d : {\n                    enumerable: true,\n                    get: function () {\n                        return e[k];\n                    }\n                });\n            }\n        });\n    }\n    n['default'] = e;\n    return Object.freeze(n);\n}\n\nvar React__namespace = /*#__PURE__*/_interopNamespace(React);\n\nvar PrintIcon = function () {\n    return (React__namespace.createElement(core.Icon, { size: 16 },\n        React__namespace.createElement(\"path\", { d: \"M7.5,19.499h9 M7.5,16.499h9 M5.5,16.5h-3c-1.103-0.003-1.997-0.897-2-2v-6c0.003-1.103,0.897-1.997,2-2h19\\n                c1.103,0.003,1.997,0.897,2,2v6c-0.003,1.103-0.897,1.997-2,2h-3\\n                M5.5,4.5v-4h9.586c0.265,0,0.52,0.105,0.707,0.293l2.414,2.414\\n                C18.395,3.394,18.5,3.649,18.5,3.914V4.5\\n                M18.5,22.5c0,0.552-0.448,1-1,1h-11c-0.552,0-1-0.448-1-1v-9h13V22.5z\\n                M3.5,8.499\\n                c0.552,0,1,0.448,1,1s-0.448,1-1,1s-1-0.448-1-1S2.948,8.499,3.5,8.499z\\n                M14.5,0.499v4h4\" })));\n};\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar TOOLTIP_OFFSET = { left: 0, top: 8 };\nvar PrintButton = function (_a) {\n    var onClick = _a.onClick;\n    var l10n = React__namespace.useContext(core.LocalizationContext);\n    var label = l10n && l10n.print ? l10n.print.print : 'Print';\n    return (React__namespace.createElement(core.Tooltip, { position: core.Position.BottomCenter, target: React__namespace.createElement(core.Button, { onClick: onClick },\n            React__namespace.createElement(PrintIcon, null)), content: function () { return label; }, offset: TOOLTIP_OFFSET }));\n};\n\nvar PrintStatus;\n(function (PrintStatus) {\n    PrintStatus[\"Inactive\"] = \"Inactive\";\n    PrintStatus[\"Preparing\"] = \"Preparing\";\n    PrintStatus[\"Cancelled\"] = \"Cancelled\";\n    PrintStatus[\"Ready\"] = \"Ready\";\n})(PrintStatus || (PrintStatus = {}));\nvar PrintStatus$1 = PrintStatus;\n\nvar Print = function (_a) {\n    var children = _a.children, store = _a.store;\n    var print = function () {\n        store.update('printStatus', PrintStatus$1.Preparing);\n    };\n    var defaultChildern = function (props) { return React__namespace.createElement(PrintButton, { onClick: props.onClick }); };\n    var render = children || defaultChildern;\n    return render({\n        onClick: print,\n    });\n};\n\nvar PrintProgress = function (_a) {\n    var numLoadedPages = _a.numLoadedPages, numPages = _a.numPages, onCancel = _a.onCancel, onStartPrinting = _a.onStartPrinting;\n    var l10n = React__namespace.useContext(core.LocalizationContext);\n    var progress = Math.floor(numLoadedPages * 100 / numPages);\n    React__namespace.useEffect(function () {\n        if (numLoadedPages === numPages) {\n            onStartPrinting();\n        }\n    }, [numLoadedPages]);\n    return (React__namespace.createElement(\"div\", { className: 'rpv-print-progress' },\n        React__namespace.createElement(\"div\", { className: 'rpv-print-progress-inner' },\n            React__namespace.createElement(\"div\", { className: 'rpv-print-progress-message' }, l10n && l10n.print ? l10n.print.preparingDocument : 'Preparing document ...'),\n            React__namespace.createElement(\"div\", { className: 'rpv-print-progress-bar' },\n                React__namespace.createElement(core.ProgressBar, { progress: progress })),\n            React__namespace.createElement(core.PrimaryButton, { onClick: onCancel }, l10n && l10n.print ? l10n.print.cancel : 'Cancel'))));\n};\n\nvar PageThumbnail = function (_a) {\n    var page = _a.page, pageHeight = _a.pageHeight, pageWidth = _a.pageWidth, rotation = _a.rotation, onLoad = _a.onLoad;\n    var renderTask = React__namespace.useRef();\n    var _b = React__namespace.useState(''), src = _b[0], setSrc = _b[1];\n    React__namespace.useEffect(function () {\n        var task = renderTask.current;\n        if (task) {\n            task.cancel();\n        }\n        var canvas = document.createElement('canvas');\n        var printUnit = 150 / 72;\n        canvas.height = Math.floor(pageHeight * printUnit);\n        canvas.width = Math.floor(pageWidth * printUnit);\n        var canvasContext = canvas.getContext('2d');\n        canvasContext.save();\n        canvasContext.fillStyle = 'rgb(255, 255, 255)';\n        canvasContext.fillRect(0, 0, canvas.width, canvas.height);\n        canvasContext.restore();\n        var viewport = page.getViewport({ rotation: rotation, scale: 1 });\n        renderTask.current = page.render({\n            canvasContext: canvasContext,\n            intent: 'print',\n            transform: [printUnit, 0, 0, printUnit, 0, 0],\n            viewport: viewport,\n        });\n        renderTask.current.promise.then(function () {\n            ('toBlob' in canvas)\n                ? canvas.toBlob(function (blob) {\n                    setSrc(URL.createObjectURL(blob));\n                })\n                : setSrc(canvas.toDataURL());\n        }, function () { });\n    }, []);\n    return (!src\n        ? React__namespace.createElement(core.Spinner, null)\n        : (React__namespace.createElement(\"div\", { className: 'rpv-print-page-thumbnail', style: {\n                height: Math.floor(pageHeight * 96 / 72) + \"px\",\n                width: Math.floor(pageWidth * 96 / 72) + \"px\",\n            } },\n            React__namespace.createElement(\"img\", { src: src, style: {\n                    height: Math.floor(pageHeight * 96 / 72) + \"px\",\n                    width: Math.floor(pageWidth * 96 / 72) + \"px\",\n                }, onLoad: onLoad }))));\n};\n\nvar PageThumbnailContainer = function (_a) {\n    var doc = _a.doc, pageHeight = _a.pageHeight, pageIndex = _a.pageIndex, pageWidth = _a.pageWidth, rotation = _a.rotation, onLoad = _a.onLoad;\n    var _b = React__namespace.useState({\n        height: pageHeight,\n        page: null,\n        viewportRotation: 0,\n        width: pageWidth,\n    }), pageSize = _b[0], setPageSize = _b[1];\n    var page = pageSize.page, height = pageSize.height, width = pageSize.width;\n    var isVertical = Math.abs(rotation) % 180 === 0;\n    React__namespace.useEffect(function () {\n        doc.getPage(pageIndex + 1).then(function (pdfPage) {\n            var viewport = pdfPage.getViewport({ scale: 1 });\n            setPageSize({\n                height: viewport.height,\n                page: pdfPage,\n                viewportRotation: viewport.rotation,\n                width: viewport.width,\n            });\n        });\n    }, []);\n    var rotationNumber = (rotation + pageSize.viewportRotation) % 360;\n    return (!page\n        ? React__namespace.createElement(core.Spinner, null)\n        : (React__namespace.createElement(PageThumbnail, { page: page, pageHeight: isVertical ? height : width, pageWidth: isVertical ? width : height, rotation: rotationNumber, onLoad: onLoad })));\n};\n\nvar PrintZone = function (_a) {\n    var doc = _a.doc, pageHeight = _a.pageHeight, pageWidth = _a.pageWidth, printStatus = _a.printStatus, rotation = _a.rotation, onCancel = _a.onCancel, onLoad = _a.onLoad;\n    var _b = React__namespace.useState(0), numLoadedPages = _b[0], setNumLoadedPages = _b[1];\n    React__namespace.useEffect(function () {\n        if (printStatus === PrintStatus$1.Ready) {\n            document.body.classList.add('rpv-body-printing');\n            window.print();\n        }\n        var handler = function () {\n            if (printStatus === PrintStatus$1.Ready) {\n                document.body.classList.remove('rpv-body-printing');\n                onCancel();\n            }\n        };\n        document.addEventListener('mousemove', handler);\n        return function () { return document.removeEventListener('mousemove', handler); };\n    }, [printStatus]);\n    var numPages = doc.numPages;\n    var loadPage = function () {\n        var total = numLoadedPages + 1;\n        setNumLoadedPages(total);\n        onLoad(total);\n    };\n    return (reactDom.createPortal((React__namespace.createElement(React__namespace.Fragment, null,\n        React__namespace.createElement(\"div\", { className: 'rpv-print-zone' }, Array(numPages).fill(0).map(function (_, index) {\n            return (React__namespace.createElement(PageThumbnailContainer, { key: index, doc: doc, pageHeight: pageHeight, pageIndex: index, pageWidth: pageWidth, rotation: rotation, onLoad: loadPage }));\n        })),\n        React__namespace.createElement(\"style\", { dangerouslySetInnerHTML: {\n                __html: \"\\n                            @supports ((size:A4) and (size:1pt 1pt)) {\\n                                @page { size: \" + pageWidth + \"pt \" + pageHeight + \"pt }\\n                            }\\n                        \"\n            } }))), document.body));\n};\n\nvar PrintContainer = function (_a) {\n    var doc = _a.doc, pageHeight = _a.pageHeight, pageWidth = _a.pageWidth, rotation = _a.rotation, store = _a.store;\n    var _b = React__namespace.useState(PrintStatus$1.Inactive), printStatus = _b[0], setPrintStatus = _b[1];\n    var _c = React__namespace.useState(0), numLoadedPagesForPrint = _c[0], setNumLoadedPagesForPrint = _c[1];\n    var cancelPrinting = function () {\n        setNumLoadedPagesForPrint(0);\n        setPrintStatus(PrintStatus$1.Inactive);\n    };\n    var startPrinting = function () {\n        setNumLoadedPagesForPrint(0);\n        setPrintStatus(PrintStatus$1.Ready);\n    };\n    var handlePrintStatus = function (status) { return setPrintStatus(status); };\n    React__namespace.useEffect(function () {\n        store.subscribe('printStatus', handlePrintStatus);\n        return function () {\n            store.unsubscribe('printStatus', handlePrintStatus);\n        };\n    }, []);\n    return (React__namespace.createElement(React__namespace.Fragment, null,\n        printStatus === PrintStatus$1.Preparing && (React__namespace.createElement(PrintProgress, { numLoadedPages: numLoadedPagesForPrint, numPages: doc.numPages, onCancel: cancelPrinting, onStartPrinting: startPrinting })),\n        (printStatus === PrintStatus$1.Preparing || printStatus === PrintStatus$1.Ready) && (React__namespace.createElement(PrintZone, { doc: doc, pageHeight: pageHeight, pageWidth: pageWidth, printStatus: printStatus, rotation: rotation, onCancel: cancelPrinting, onLoad: setNumLoadedPagesForPrint }))));\n};\n\nvar isMac = /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform);\nvar ShortcutHandler = function (_a) {\n    var containerRef = _a.containerRef, store = _a.store;\n    var keydownHandler = function (e) {\n        if (e.shiftKey || e.altKey || e.key !== 'p') {\n            return;\n        }\n        var isCommandPressed = isMac ? e.metaKey : e.ctrlKey;\n        if (!isCommandPressed) {\n            return;\n        }\n        var containerEle = containerRef.current;\n        if (!containerEle || !document.activeElement || !document.activeElement.contains(containerEle)) {\n            return;\n        }\n        e.preventDefault();\n        store.update('printStatus', PrintStatus$1.Preparing);\n    };\n    React__namespace.useEffect(function () {\n        var containerEle = containerRef.current;\n        if (!containerEle) {\n            return;\n        }\n        document.addEventListener('keydown', keydownHandler);\n        return function () {\n            document.removeEventListener('keydown', keydownHandler);\n        };\n    }, [containerRef.current]);\n    return (React__namespace.createElement(React__namespace.Fragment, null));\n};\n\nvar printPlugin = function () {\n    var store = React__namespace.useMemo(function () { return core.createStore({\n        printStatus: PrintStatus$1.Inactive,\n    }); }, []);\n    var PrintDecorator = function (props) { return (React__namespace.createElement(Print, __assign({}, props, { store: store }))); };\n    var PrintButtonDecorator = function () { return (React__namespace.createElement(PrintDecorator, null, function (props) { return React__namespace.createElement(PrintButton, __assign({}, props)); })); };\n    var renderViewer = function (props) {\n        var slot = props.slot;\n        var updateSlot = {\n            children: (React__namespace.createElement(React__namespace.Fragment, null,\n                React__namespace.createElement(ShortcutHandler, { containerRef: props.containerRef, store: store }),\n                React__namespace.createElement(PrintContainer, { doc: props.doc, pageHeight: props.pageHeight, pageWidth: props.pageWidth, rotation: props.rotation, store: store }),\n                slot.children))\n        };\n        return __assign(__assign({}, slot), updateSlot);\n    };\n    return {\n        renderViewer: renderViewer,\n        Print: PrintDecorator,\n        PrintButton: PrintButtonDecorator,\n    };\n};\n\nexports.PrintIcon = PrintIcon;\nexports.printPlugin = printPlugin;\n"]},"metadata":{},"sourceType":"script"}