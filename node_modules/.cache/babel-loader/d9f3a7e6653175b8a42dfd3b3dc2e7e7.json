{"ast":null,"code":"'use strict';\n\nfunction _interopDefault(ex) {\n  return ex && typeof ex === 'object' && 'default' in ex ? ex['default'] : ex;\n}\n\nvar _regeneratorRuntime = _interopDefault(require('@babel/runtime/regenerator'));\n\nvar _asyncToGenerator = _interopDefault(require('@babel/runtime/helpers/asyncToGenerator'));\n\nvar _classCallCheck = _interopDefault(require('@babel/runtime/helpers/classCallCheck'));\n\nvar _createClass = _interopDefault(require('@babel/runtime/helpers/createClass'));\n\nvar _possibleConstructorReturn = _interopDefault(require('@babel/runtime/helpers/possibleConstructorReturn'));\n\nvar _getPrototypeOf = _interopDefault(require('@babel/runtime/helpers/getPrototypeOf'));\n\nvar _assertThisInitialized = _interopDefault(require('@babel/runtime/helpers/assertThisInitialized'));\n\nvar _inherits = _interopDefault(require('@babel/runtime/helpers/inherits'));\n\nvar _defineProperty = _interopDefault(require('@babel/runtime/helpers/defineProperty'));\n\nvar React = require('react');\n\nvar React__default = _interopDefault(React);\n\nvar PropTypes = _interopDefault(require('prop-types'));\n\nvar debounce = _interopDefault(require('throttle-debounce/debounce'));\n\nif (navigator.mediaDevices === undefined) {\n  navigator.mediaDevices = {};\n} // Some browsers partially implement mediaDevices. We can't just assign an object\n// with getUserMedia as it would overwrite existing properties.\n// Here, we will just add the getUserMedia property if it's missing.\n\n\nif (navigator.mediaDevices.getUserMedia === undefined) {\n  navigator.mediaDevices.getUserMedia = function (constraints) {\n    // First get ahold of the legacy getUserMedia, if present\n    var getUserMedia = navigator.webkitGetUserMedia || navigator.mozGetUserMedia; // Some browsers just don't implement it - return a rejected promise with an error\n    // to keep a consistent interface\n\n    if (!getUserMedia) {\n      return Promise.reject(new Error('getUserMedia is not implemented in this browser'));\n    } // Otherwise, wrap the call to the old navigator.getUserMedia with a Promise\n\n\n    return new Promise(function (resolve, reject) {\n      getUserMedia.call(navigator, constraints, resolve, reject);\n    });\n  };\n}\n\nvar errorTypes = {\n  INVALID_FACING_MODE: {\n    details: 'Facing mode not recognized',\n    type: 'INVALID_FACING_MODE'\n  },\n  NO_STREAM: {\n    details: 'Your browser does not support this feature',\n    type: 'NO_STREAM'\n  },\n  TAKE_PHOTO_FAILURE: {\n    details: 'Could not take a photo',\n    type: 'TAKE_PHOTO_FAILURE'\n  },\n  UNSUPPORTED: {\n    details: 'Your browser does not support this feature',\n    type: 'UNSUPPORTED'\n  }\n};\nvar wrapperStyles = {\n  padding: '30px 15px'\n};\nvar textStyles = {\n  fontSize: '16px',\n  margin: 0,\n  textAlign: 'center'\n};\n\nvar CameraError = function CameraError(_ref) {\n  var _ref$errorType = _ref.errorType,\n      errorType = _ref$errorType === void 0 ? '' : _ref$errorType;\n  return React__default.createElement(\"div\", {\n    style: wrapperStyles\n  }, React__default.createElement(\"p\", {\n    style: textStyles\n  }, errorTypes[errorType].details || 'Oops, something broke.'));\n};\n\nvar captureButtonStyle = {\n  background: 'white',\n  border: '6px solid white',\n  borderRadius: '50%',\n  boxShadow: '0 2px 7px rgba(0, 0, 0, 0.25), inset 0 0 0 2px rgba(0, 0, 0, 0.75)',\n  cursor: 'pointer',\n  height: '60px',\n  width: '60px'\n};\n\nvar CaptureButton = function CaptureButton(_ref) {\n  var onCapture = _ref.onCapture;\n  return React__default.createElement(\"button\", {\n    onClick: onCapture,\n    style: captureButtonStyle,\n    title: \"Take photo\",\n    type: \"button\"\n  });\n};\n\nCaptureButton.propTypes = {\n  onCapture: PropTypes.func.isRequired\n};\nvar wrapperStyle = {\n  position: 'relative'\n};\n\nvar CameraWrapper = function CameraWrapper(_ref) {\n  var children = _ref.children;\n  return React__default.createElement(\"div\", {\n    style: wrapperStyle\n  }, children);\n};\n\nvar cameraControlsStyle = {\n  alignItems: 'center',\n  bottom: '30px',\n  boxSizing: 'border-box',\n  display: 'flex',\n  justifyContent: 'center',\n  padding: '0 30px',\n  position: 'absolute',\n  width: '100%'\n};\n\nvar CameraControls = function CameraControls(_ref) {\n  var children = _ref.children;\n  return React__default.createElement(\"div\", {\n    style: cameraControlsStyle\n  }, children);\n};\n\nvar facingModes = {\n  ENVIRONMENT: 'ENVIRONMENT',\n  LEFT: 'LEFT',\n  RIGHT: 'RIGHT',\n  USER: 'USER'\n};\n\nvar SwitchIcon = function SwitchIcon() {\n  return React__default.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    x: \"0px\",\n    y: \"0px\",\n    width: \"24px\",\n    height: \"24px\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: \"2\"\n  }, React__default.createElement(\"g\", {\n    strokeWidth: \"2\",\n    transform: \"translate(0, 0)\"\n  }, React__default.createElement(\"polygon\", {\n    fill: \"none\",\n    stroke: \"#fff\",\n    strokeWidth: \"2\",\n    strokeLinecap: \"square\",\n    strokeMiterlimit: \"10\",\n    points: \"1,22 23,22 23,5 19,5 17,2 11,2 9,5 1,5 \",\n    strokeLinejoin: \"miter\"\n  }), ' ', React__default.createElement(\"circle\", {\n    fill: \"none\",\n    stroke: \"#fff\",\n    strokeWidth: \"2\",\n    strokeLinecap: \"square\",\n    strokeMiterlimit: \"10\",\n    cx: \"14\",\n    cy: \"13\",\n    r: \"5\",\n    strokeLinejoin: \"miter\"\n  }), ' ', React__default.createElement(\"circle\", {\n    fill: \"#fff\",\n    cx: \"5\",\n    cy: \"9\",\n    r: \"1\",\n    strokeLinejoin: \"miter\",\n    strokeLinecap: \"square\"\n  })));\n};\n\nvar switchButtonStyle = {\n  alignItems: 'center',\n  background: 'none',\n  border: 'none',\n  cursor: 'pointer',\n  display: 'flex',\n  height: '40px',\n  justifyContent: 'center',\n  position: 'absolute',\n  right: '5vw',\n  top: '5vh',\n  width: '40px'\n};\n\nvar SwitchModeButton = function SwitchModeButton(_ref) {\n  var _ref$currentFacingMod = _ref.currentFacingMode,\n      currentFacingMode = _ref$currentFacingMod === void 0 ? '' : _ref$currentFacingMod,\n      onSwitch = _ref.onSwitch;\n  return React__default.createElement(\"button\", {\n    onClick: function onClick() {\n      return onSwitch(currentFacingMode === facingModes.ENVIRONMENT ? facingModes.USER : facingModes.ENVIRONMENT);\n    },\n    style: switchButtonStyle,\n    type: \"button\"\n  }, React__default.createElement(SwitchIcon, null));\n};\n\nSwitchModeButton.propTypes = {\n  currentFacingMode: PropTypes.string.isRequired,\n  onSwitch: PropTypes.func.isRequired\n};\n/**\r\n * getAvailableDevices\r\n * Returns a list of available hardware audio and or video devices.\r\n *\r\n * @param {string} type Either 'video' or 'audio'. If not specified, all\r\n * devices will be returned.\r\n */\n\nvar getAvailableDevices = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var type,\n        devices,\n        _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            type = _args.length > 0 && _args[0] !== undefined ? _args[0] : '';\n            _context.next = 3;\n            return navigator.mediaDevices.enumerateDevices();\n\n          case 3:\n            devices = _context.sent;\n\n            if (!(devices.length > 0)) {\n              _context.next = 11;\n              break;\n            }\n\n            if (type) {\n              _context.next = 7;\n              break;\n            }\n\n            return _context.abrupt(\"return\", devices);\n\n          case 7:\n            if (!(type === 'video')) {\n              _context.next = 9;\n              break;\n            }\n\n            return _context.abrupt(\"return\", devices.filter(function (d) {\n              return d.kind === 'videoinput';\n            }));\n\n          case 9:\n            if (!(type === 'audio')) {\n              _context.next = 11;\n              break;\n            }\n\n            return _context.abrupt(\"return\", devices.filter(function (d) {\n              return d.kind === 'audioinput';\n            }));\n\n          case 11:\n            return _context.abrupt(\"return\", null);\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function getAvailableDevices() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar buildConstraints = function buildConstraints(facingMode, height, width) {\n  var constraints = {\n    video: {}\n  };\n  if (facingMode) constraints.video.facingMode = facingMode.toLowerCase();\n  if (height) constraints.video.height = {\n    ideal: height\n  };\n  if (width) constraints.video.width = {\n    ideal: width\n  };\n  return constraints;\n};\n\nvar Camera = /*#__PURE__*/function (_PureComponent) {\n  _inherits(Camera, _PureComponent);\n\n  function Camera(props) {\n    var _this;\n\n    _classCallCheck(this, Camera);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Camera).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_this), \"captureMediaStream\", function (event, mediaStream) {\n      var ms = mediaStream || _this.state.mediaStream;\n      if (!ms) _this.setState({\n        error: errorTypes.NO_STREAM.type\n      });\n      var mediaStreamTrack = ms.getVideoTracks()[0];\n      var imageCapture = new window.ImageCapture(mediaStreamTrack);\n\n      if (imageCapture) {\n        _this.takePhoto(imageCapture);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"changeFacingMode\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var facingMode,\n          _this$state$constrain,\n          height,\n          width,\n          constraints,\n          _args = arguments;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              facingMode = _args.length > 0 && _args[0] !== undefined ? _args[0] : '';\n\n              if (facingModes[facingMode]) {\n                _context.next = 3;\n                break;\n              }\n\n              return _context.abrupt(\"return\", _this.setState({\n                error: errorTypes.INVALID_FACING_MODE.type\n              }));\n\n            case 3:\n              _this.stopMediaStream();\n\n              _this$state$constrain = _this.state.constraints.video, height = _this$state$constrain.height, width = _this$state$constrain.width;\n              constraints = buildConstraints(facingMode, height, width);\n              _context.next = 8;\n              return _this.getMediaStream(constraints);\n\n            case 8:\n              _this.setVideoStream();\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })));\n\n    _defineProperty(_assertThisInitialized(_this), \"handleResize\", debounce(150, /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var _this$state$constrain2, facingMode, height, width;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _this$state$constrain2 = _this.state.constraints.video, facingMode = _this$state$constrain2.facingMode, height = _this$state$constrain2.height, width = _this$state$constrain2.width;\n              _context2.next = 3;\n              return _this.getMediaStream(buildConstraints(facingMode, height, width));\n\n            case 3:\n              _this.setVideoStream();\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }))));\n\n    var _this$props = _this.props,\n        _facingMode = _this$props.facingMode,\n        _height = _this$props.height,\n        _width = _this$props.width;\n\n    var _constraints = buildConstraints(_facingMode, _height, _width);\n\n    _this.state = {\n      constraints: _constraints,\n      devices: null,\n      error: false,\n      isIntersecting: false,\n      mediaStream: null\n    };\n    return _this;\n  }\n\n  _createClass(Camera, [{\n    key: \"componentWillMount\",\n    value: function () {\n      var _componentWillMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        var devices;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return getAvailableDevices('video');\n\n              case 2:\n                devices = _context3.sent;\n\n                if (devices) {\n                  this.setState({\n                    devices: devices\n                  });\n                }\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function componentWillMount() {\n        return _componentWillMount.apply(this, arguments);\n      }\n\n      return componentWillMount;\n    }()\n  }, {\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this.getMediaStream(this.state.constraints);\n\n              case 2:\n                this.setVideoStream();\n                window.addEventListener('resize', this.handleResize);\n\n              case 4:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.stopMediaStream();\n      window.removeEventListener('resize', this.handleResize);\n    }\n  }, {\n    key: \"getMediaStream\",\n    value: function () {\n      var _getMediaStream = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n        var constraints,\n            mediaStream,\n            _args5 = arguments;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                constraints = _args5.length > 0 && _args5[0] !== undefined ? _args5[0] : {};\n                _context5.prev = 1;\n                _context5.next = 4;\n                return navigator.mediaDevices.getUserMedia(constraints);\n\n              case 4:\n                mediaStream = _context5.sent;\n                this.setState({\n                  mediaStream: mediaStream\n                });\n                _context5.next = 12;\n                break;\n\n              case 8:\n                _context5.prev = 8;\n                _context5.t0 = _context5[\"catch\"](1);\n                console.log(_context5.t0);\n                this.setState({\n                  error: errorTypes.UNSUPPORTED.type\n                });\n\n              case 12:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[1, 8]]);\n      }));\n\n      function getMediaStream() {\n        return _getMediaStream.apply(this, arguments);\n      }\n\n      return getMediaStream;\n    }()\n  }, {\n    key: \"takePhoto\",\n    value: function () {\n      var _takePhoto = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(imageCapture) {\n        var onTakePhoto, blob, capturedImg;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.prev = 0;\n                onTakePhoto = this.props.onTakePhoto;\n                _context6.next = 4;\n                return imageCapture.takePhoto();\n\n              case 4:\n                blob = _context6.sent;\n                capturedImg = URL.createObjectURL(blob);\n\n                if (onTakePhoto) {\n                  onTakePhoto(capturedImg);\n                }\n\n                _context6.next = 12;\n                break;\n\n              case 9:\n                _context6.prev = 9;\n                _context6.t0 = _context6[\"catch\"](0);\n                this.setState({\n                  error: errorTypes.TAKE_PHOTO_FAILURE.type\n                });\n\n              case 12:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this, [[0, 9]]);\n      }));\n\n      function takePhoto(_x) {\n        return _takePhoto.apply(this, arguments);\n      }\n\n      return takePhoto;\n    }()\n  }, {\n    key: \"setVideoStream\",\n    value: function setVideoStream() {\n      var _this2 = this;\n\n      var mediaStream = this.state.mediaStream;\n\n      if (this.video) {\n        this.video.srcObject = mediaStream;\n\n        this.video.onloadedmetadata = function () {\n          return _this2.video.play();\n        };\n      }\n    }\n  }, {\n    key: \"stopMediaStream\",\n    value: function stopMediaStream() {\n      if (this.video && this.video.srcObject) {\n        var onStopMediaStream = this.props.onStopMediaStream;\n        this.video.srcObject.getTracks().forEach(function (t) {\n          return t.stop();\n        });\n\n        if (onStopMediaStream) {\n          onStopMediaStream();\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props2 = this.props,\n          captureButtonRenderer = _this$props2.captureButtonRenderer,\n          responsive = _this$props2.responsive;\n      var _this$state = this.state,\n          _this$state$constrain3 = _this$state.constraints,\n          constraints = _this$state$constrain3 === void 0 ? {} : _this$state$constrain3,\n          devices = _this$state.devices,\n          error = _this$state.error;\n      var multipleDevices = devices && devices.length > 1;\n      var facingMode = constraints.video.facingMode;\n\n      if (error) {\n        return React__default.createElement(CameraError, {\n          errorType: error\n        });\n      }\n\n      return React__default.createElement(CameraWrapper, null, React__default.createElement(\"video\", {\n        autoPlay: true,\n        playsInline: true,\n        ref: function ref(video) {\n          return _this3.video = video;\n        },\n        style: responsive ? {\n          background: 'black',\n          display: 'block',\n          width: '100%'\n        } : {\n          background: 'black',\n          display: 'block'\n        }\n      }), React__default.createElement(CameraControls, null, captureButtonRenderer ? captureButtonRenderer(this.captureMediaStream) : React__default.createElement(CaptureButton, {\n        onCapture: this.captureMediaStream\n      })), multipleDevices && React__default.createElement(SwitchModeButton, {\n        currentFacingMode: facingMode,\n        onSwitch: this.changeFacingMode\n      }));\n    }\n  }]);\n\n  return Camera;\n}(React.PureComponent);\n\nCamera.defaultProps = {\n  facingMode: facingModes.ENVIRONMENT,\n  responsive: true\n};\nCamera.propTypes = {\n  captureButtonRenderer: PropTypes.func,\n  facingMode: PropTypes.string,\n  height: PropTypes.number,\n  onStopMediaStream: PropTypes.func,\n  onTakePhoto: PropTypes.func,\n  responsive: PropTypes.bool,\n  width: PropTypes.number\n};\nmodule.exports = Camera;","map":{"version":3,"sources":["C:/Users/chaki/OneDrive/Desktop/aymenouerghui/frontendReactJs/node_modules/react-dom-camera/lib/react-camera.js"],"names":["_interopDefault","ex","_regeneratorRuntime","require","_asyncToGenerator","_classCallCheck","_createClass","_possibleConstructorReturn","_getPrototypeOf","_assertThisInitialized","_inherits","_defineProperty","React","React__default","PropTypes","debounce","navigator","mediaDevices","undefined","getUserMedia","constraints","webkitGetUserMedia","mozGetUserMedia","Promise","reject","Error","resolve","call","errorTypes","INVALID_FACING_MODE","details","type","NO_STREAM","TAKE_PHOTO_FAILURE","UNSUPPORTED","wrapperStyles","padding","textStyles","fontSize","margin","textAlign","CameraError","_ref","_ref$errorType","errorType","createElement","style","captureButtonStyle","background","border","borderRadius","boxShadow","cursor","height","width","CaptureButton","onCapture","onClick","title","propTypes","func","isRequired","wrapperStyle","position","CameraWrapper","children","cameraControlsStyle","alignItems","bottom","boxSizing","display","justifyContent","CameraControls","facingModes","ENVIRONMENT","LEFT","RIGHT","USER","SwitchIcon","xmlns","x","y","viewBox","strokeWidth","transform","fill","stroke","strokeLinecap","strokeMiterlimit","points","strokeLinejoin","cx","cy","r","switchButtonStyle","right","top","SwitchModeButton","_ref$currentFacingMod","currentFacingMode","onSwitch","string","getAvailableDevices","mark","_callee","devices","_args","arguments","wrap","_callee$","_context","prev","next","length","enumerateDevices","sent","abrupt","filter","d","kind","stop","apply","buildConstraints","facingMode","video","toLowerCase","ideal","Camera","_PureComponent","props","_this","event","mediaStream","ms","state","setState","error","mediaStreamTrack","getVideoTracks","imageCapture","window","ImageCapture","takePhoto","_this$state$constrain","stopMediaStream","getMediaStream","setVideoStream","_callee2","_this$state$constrain2","_callee2$","_context2","_this$props","_facingMode","_height","_width","_constraints","isIntersecting","key","value","_componentWillMount","_callee3","_callee3$","_context3","componentWillMount","_componentDidMount","_callee4","_callee4$","_context4","addEventListener","handleResize","componentDidMount","componentWillUnmount","removeEventListener","_getMediaStream","_callee5","_args5","_callee5$","_context5","t0","console","log","_takePhoto","_callee6","onTakePhoto","blob","capturedImg","_callee6$","_context6","URL","createObjectURL","_x","_this2","srcObject","onloadedmetadata","play","onStopMediaStream","getTracks","forEach","t","render","_this3","_this$props2","captureButtonRenderer","responsive","_this$state","_this$state$constrain3","multipleDevices","autoPlay","playsInline","ref","captureMediaStream","changeFacingMode","PureComponent","defaultProps","number","bool","module","exports"],"mappings":"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","sourcesContent":["'use strict';\r\n\r\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\r\n\r\nvar _regeneratorRuntime = _interopDefault(require('@babel/runtime/regenerator'));\r\nvar _asyncToGenerator = _interopDefault(require('@babel/runtime/helpers/asyncToGenerator'));\r\nvar _classCallCheck = _interopDefault(require('@babel/runtime/helpers/classCallCheck'));\r\nvar _createClass = _interopDefault(require('@babel/runtime/helpers/createClass'));\r\nvar _possibleConstructorReturn = _interopDefault(require('@babel/runtime/helpers/possibleConstructorReturn'));\r\nvar _getPrototypeOf = _interopDefault(require('@babel/runtime/helpers/getPrototypeOf'));\r\nvar _assertThisInitialized = _interopDefault(require('@babel/runtime/helpers/assertThisInitialized'));\r\nvar _inherits = _interopDefault(require('@babel/runtime/helpers/inherits'));\r\nvar _defineProperty = _interopDefault(require('@babel/runtime/helpers/defineProperty'));\r\nvar React = require('react');\r\nvar React__default = _interopDefault(React);\r\nvar PropTypes = _interopDefault(require('prop-types'));\r\nvar debounce = _interopDefault(require('throttle-debounce/debounce'));\r\n\r\nif (navigator.mediaDevices === undefined) {\r\n  navigator.mediaDevices = {};\r\n} // Some browsers partially implement mediaDevices. We can't just assign an object\r\n// with getUserMedia as it would overwrite existing properties.\r\n// Here, we will just add the getUserMedia property if it's missing.\r\n\r\n\r\nif (navigator.mediaDevices.getUserMedia === undefined) {\r\n  navigator.mediaDevices.getUserMedia = function (constraints) {\r\n    // First get ahold of the legacy getUserMedia, if present\r\n    var getUserMedia = navigator.webkitGetUserMedia || navigator.mozGetUserMedia; // Some browsers just don't implement it - return a rejected promise with an error\r\n    // to keep a consistent interface\r\n\r\n    if (!getUserMedia) {\r\n      return Promise.reject(new Error('getUserMedia is not implemented in this browser'));\r\n    } // Otherwise, wrap the call to the old navigator.getUserMedia with a Promise\r\n\r\n\r\n    return new Promise(function (resolve, reject) {\r\n      getUserMedia.call(navigator, constraints, resolve, reject);\r\n    });\r\n  };\r\n}\r\n\r\nvar errorTypes = {\r\n  INVALID_FACING_MODE: {\r\n    details: 'Facing mode not recognized',\r\n    type: 'INVALID_FACING_MODE'\r\n  },\r\n  NO_STREAM: {\r\n    details: 'Your browser does not support this feature',\r\n    type: 'NO_STREAM'\r\n  },\r\n  TAKE_PHOTO_FAILURE: {\r\n    details: 'Could not take a photo',\r\n    type: 'TAKE_PHOTO_FAILURE'\r\n  },\r\n  UNSUPPORTED: {\r\n    details: 'Your browser does not support this feature',\r\n    type: 'UNSUPPORTED'\r\n  }\r\n};\r\n\r\nvar wrapperStyles = {\r\n  padding: '30px 15px'\r\n};\r\nvar textStyles = {\r\n  fontSize: '16px',\r\n  margin: 0,\r\n  textAlign: 'center'\r\n};\r\n\r\nvar CameraError = function CameraError(_ref) {\r\n  var _ref$errorType = _ref.errorType,\r\n      errorType = _ref$errorType === void 0 ? '' : _ref$errorType;\r\n  return React__default.createElement(\"div\", {\r\n    style: wrapperStyles\r\n  }, React__default.createElement(\"p\", {\r\n    style: textStyles\r\n  }, errorTypes[errorType].details || 'Oops, something broke.'));\r\n};\r\n\r\nvar captureButtonStyle = {\r\n  background: 'white',\r\n  border: '6px solid white',\r\n  borderRadius: '50%',\r\n  boxShadow: '0 2px 7px rgba(0, 0, 0, 0.25), inset 0 0 0 2px rgba(0, 0, 0, 0.75)',\r\n  cursor: 'pointer',\r\n  height: '60px',\r\n  width: '60px'\r\n};\r\n\r\nvar CaptureButton = function CaptureButton(_ref) {\r\n  var onCapture = _ref.onCapture;\r\n  return React__default.createElement(\"button\", {\r\n    onClick: onCapture,\r\n    style: captureButtonStyle,\r\n    title: \"Take photo\",\r\n    type: \"button\"\r\n  });\r\n};\r\n\r\nCaptureButton.propTypes = {\r\n  onCapture: PropTypes.func.isRequired\r\n};\r\n\r\nvar wrapperStyle = {\r\n  position: 'relative'\r\n};\r\n\r\nvar CameraWrapper = function CameraWrapper(_ref) {\r\n  var children = _ref.children;\r\n  return React__default.createElement(\"div\", {\r\n    style: wrapperStyle\r\n  }, children);\r\n};\r\n\r\nvar cameraControlsStyle = {\r\n  alignItems: 'center',\r\n  bottom: '30px',\r\n  boxSizing: 'border-box',\r\n  display: 'flex',\r\n  justifyContent: 'center',\r\n  padding: '0 30px',\r\n  position: 'absolute',\r\n  width: '100%'\r\n};\r\n\r\nvar CameraControls = function CameraControls(_ref) {\r\n  var children = _ref.children;\r\n  return React__default.createElement(\"div\", {\r\n    style: cameraControlsStyle\r\n  }, children);\r\n};\r\n\r\nvar facingModes = {\r\n  ENVIRONMENT: 'ENVIRONMENT',\r\n  LEFT: 'LEFT',\r\n  RIGHT: 'RIGHT',\r\n  USER: 'USER'\r\n};\r\n\r\nvar SwitchIcon = function SwitchIcon() {\r\n  return React__default.createElement(\"svg\", {\r\n    xmlns: \"http://www.w3.org/2000/svg\",\r\n    x: \"0px\",\r\n    y: \"0px\",\r\n    width: \"24px\",\r\n    height: \"24px\",\r\n    viewBox: \"0 0 24 24\",\r\n    strokeWidth: \"2\"\r\n  }, React__default.createElement(\"g\", {\r\n    strokeWidth: \"2\",\r\n    transform: \"translate(0, 0)\"\r\n  }, React__default.createElement(\"polygon\", {\r\n    fill: \"none\",\r\n    stroke: \"#fff\",\r\n    strokeWidth: \"2\",\r\n    strokeLinecap: \"square\",\r\n    strokeMiterlimit: \"10\",\r\n    points: \"1,22 23,22 23,5 19,5 17,2 11,2 9,5 1,5 \",\r\n    strokeLinejoin: \"miter\"\r\n  }), ' ', React__default.createElement(\"circle\", {\r\n    fill: \"none\",\r\n    stroke: \"#fff\",\r\n    strokeWidth: \"2\",\r\n    strokeLinecap: \"square\",\r\n    strokeMiterlimit: \"10\",\r\n    cx: \"14\",\r\n    cy: \"13\",\r\n    r: \"5\",\r\n    strokeLinejoin: \"miter\"\r\n  }), ' ', React__default.createElement(\"circle\", {\r\n    fill: \"#fff\",\r\n    cx: \"5\",\r\n    cy: \"9\",\r\n    r: \"1\",\r\n    strokeLinejoin: \"miter\",\r\n    strokeLinecap: \"square\"\r\n  })));\r\n};\r\n\r\nvar switchButtonStyle = {\r\n  alignItems: 'center',\r\n  background: 'none',\r\n  border: 'none',\r\n  cursor: 'pointer',\r\n  display: 'flex',\r\n  height: '40px',\r\n  justifyContent: 'center',\r\n  position: 'absolute',\r\n  right: '5vw',\r\n  top: '5vh',\r\n  width: '40px'\r\n};\r\n\r\nvar SwitchModeButton = function SwitchModeButton(_ref) {\r\n  var _ref$currentFacingMod = _ref.currentFacingMode,\r\n      currentFacingMode = _ref$currentFacingMod === void 0 ? '' : _ref$currentFacingMod,\r\n      onSwitch = _ref.onSwitch;\r\n  return React__default.createElement(\"button\", {\r\n    onClick: function onClick() {\r\n      return onSwitch(currentFacingMode === facingModes.ENVIRONMENT ? facingModes.USER : facingModes.ENVIRONMENT);\r\n    },\r\n    style: switchButtonStyle,\r\n    type: \"button\"\r\n  }, React__default.createElement(SwitchIcon, null));\r\n};\r\n\r\nSwitchModeButton.propTypes = {\r\n  currentFacingMode: PropTypes.string.isRequired,\r\n  onSwitch: PropTypes.func.isRequired\r\n};\r\n\r\n/**\r\n * getAvailableDevices\r\n * Returns a list of available hardware audio and or video devices.\r\n *\r\n * @param {string} type Either 'video' or 'audio'. If not specified, all\r\n * devices will be returned.\r\n */\r\nvar getAvailableDevices =\r\n/*#__PURE__*/\r\nfunction () {\r\n  var _ref = _asyncToGenerator(\r\n  /*#__PURE__*/\r\n  _regeneratorRuntime.mark(function _callee() {\r\n    var type,\r\n        devices,\r\n        _args = arguments;\r\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\r\n      while (1) {\r\n        switch (_context.prev = _context.next) {\r\n          case 0:\r\n            type = _args.length > 0 && _args[0] !== undefined ? _args[0] : '';\r\n            _context.next = 3;\r\n            return navigator.mediaDevices.enumerateDevices();\r\n\r\n          case 3:\r\n            devices = _context.sent;\r\n\r\n            if (!(devices.length > 0)) {\r\n              _context.next = 11;\r\n              break;\r\n            }\r\n\r\n            if (type) {\r\n              _context.next = 7;\r\n              break;\r\n            }\r\n\r\n            return _context.abrupt(\"return\", devices);\r\n\r\n          case 7:\r\n            if (!(type === 'video')) {\r\n              _context.next = 9;\r\n              break;\r\n            }\r\n\r\n            return _context.abrupt(\"return\", devices.filter(function (d) {\r\n              return d.kind === 'videoinput';\r\n            }));\r\n\r\n          case 9:\r\n            if (!(type === 'audio')) {\r\n              _context.next = 11;\r\n              break;\r\n            }\r\n\r\n            return _context.abrupt(\"return\", devices.filter(function (d) {\r\n              return d.kind === 'audioinput';\r\n            }));\r\n\r\n          case 11:\r\n            return _context.abrupt(\"return\", null);\r\n\r\n          case 12:\r\n          case \"end\":\r\n            return _context.stop();\r\n        }\r\n      }\r\n    }, _callee);\r\n  }));\r\n\r\n  return function getAvailableDevices() {\r\n    return _ref.apply(this, arguments);\r\n  };\r\n}();\r\nvar buildConstraints = function buildConstraints(facingMode, height, width) {\r\n  var constraints = {\r\n    video: {}\r\n  };\r\n  if (facingMode) constraints.video.facingMode = facingMode.toLowerCase();\r\n  if (height) constraints.video.height = {\r\n    ideal: height\r\n  };\r\n  if (width) constraints.video.width = {\r\n    ideal: width\r\n  };\r\n  return constraints;\r\n};\r\n\r\nvar Camera =\r\n/*#__PURE__*/\r\nfunction (_PureComponent) {\r\n  _inherits(Camera, _PureComponent);\r\n\r\n  function Camera(props) {\r\n    var _this;\r\n\r\n    _classCallCheck(this, Camera);\r\n\r\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Camera).call(this, props));\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"captureMediaStream\", function (event, mediaStream) {\r\n      var ms = mediaStream || _this.state.mediaStream;\r\n      if (!ms) _this.setState({\r\n        error: errorTypes.NO_STREAM.type\r\n      });\r\n      var mediaStreamTrack = ms.getVideoTracks()[0];\r\n      var imageCapture = new window.ImageCapture(mediaStreamTrack);\r\n\r\n      if (imageCapture) {\r\n        _this.takePhoto(imageCapture);\r\n      }\r\n    });\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"changeFacingMode\",\r\n    /*#__PURE__*/\r\n    _asyncToGenerator(\r\n    /*#__PURE__*/\r\n    _regeneratorRuntime.mark(function _callee() {\r\n      var facingMode,\r\n          _this$state$constrain,\r\n          height,\r\n          width,\r\n          constraints,\r\n          _args = arguments;\r\n\r\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\r\n        while (1) {\r\n          switch (_context.prev = _context.next) {\r\n            case 0:\r\n              facingMode = _args.length > 0 && _args[0] !== undefined ? _args[0] : '';\r\n\r\n              if (facingModes[facingMode]) {\r\n                _context.next = 3;\r\n                break;\r\n              }\r\n\r\n              return _context.abrupt(\"return\", _this.setState({\r\n                error: errorTypes.INVALID_FACING_MODE.type\r\n              }));\r\n\r\n            case 3:\r\n              _this.stopMediaStream();\r\n\r\n              _this$state$constrain = _this.state.constraints.video, height = _this$state$constrain.height, width = _this$state$constrain.width;\r\n              constraints = buildConstraints(facingMode, height, width);\r\n              _context.next = 8;\r\n              return _this.getMediaStream(constraints);\r\n\r\n            case 8:\r\n              _this.setVideoStream();\r\n\r\n            case 9:\r\n            case \"end\":\r\n              return _context.stop();\r\n          }\r\n        }\r\n      }, _callee);\r\n    })));\r\n\r\n    _defineProperty(_assertThisInitialized(_this), \"handleResize\", debounce(150,\r\n    /*#__PURE__*/\r\n    _asyncToGenerator(\r\n    /*#__PURE__*/\r\n    _regeneratorRuntime.mark(function _callee2() {\r\n      var _this$state$constrain2, facingMode, height, width;\r\n\r\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\r\n        while (1) {\r\n          switch (_context2.prev = _context2.next) {\r\n            case 0:\r\n              _this$state$constrain2 = _this.state.constraints.video, facingMode = _this$state$constrain2.facingMode, height = _this$state$constrain2.height, width = _this$state$constrain2.width;\r\n              _context2.next = 3;\r\n              return _this.getMediaStream(buildConstraints(facingMode, height, width));\r\n\r\n            case 3:\r\n              _this.setVideoStream();\r\n\r\n            case 4:\r\n            case \"end\":\r\n              return _context2.stop();\r\n          }\r\n        }\r\n      }, _callee2);\r\n    }))));\r\n\r\n    var _this$props = _this.props,\r\n        _facingMode = _this$props.facingMode,\r\n        _height = _this$props.height,\r\n        _width = _this$props.width;\r\n\r\n    var _constraints = buildConstraints(_facingMode, _height, _width);\r\n\r\n    _this.state = {\r\n      constraints: _constraints,\r\n      devices: null,\r\n      error: false,\r\n      isIntersecting: false,\r\n      mediaStream: null\r\n    };\r\n    return _this;\r\n  }\r\n\r\n  _createClass(Camera, [{\r\n    key: \"componentWillMount\",\r\n    value: function () {\r\n      var _componentWillMount = _asyncToGenerator(\r\n      /*#__PURE__*/\r\n      _regeneratorRuntime.mark(function _callee3() {\r\n        var devices;\r\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\r\n          while (1) {\r\n            switch (_context3.prev = _context3.next) {\r\n              case 0:\r\n                _context3.next = 2;\r\n                return getAvailableDevices('video');\r\n\r\n              case 2:\r\n                devices = _context3.sent;\r\n\r\n                if (devices) {\r\n                  this.setState({\r\n                    devices: devices\r\n                  });\r\n                }\r\n\r\n              case 4:\r\n              case \"end\":\r\n                return _context3.stop();\r\n            }\r\n          }\r\n        }, _callee3, this);\r\n      }));\r\n\r\n      function componentWillMount() {\r\n        return _componentWillMount.apply(this, arguments);\r\n      }\r\n\r\n      return componentWillMount;\r\n    }()\r\n  }, {\r\n    key: \"componentDidMount\",\r\n    value: function () {\r\n      var _componentDidMount = _asyncToGenerator(\r\n      /*#__PURE__*/\r\n      _regeneratorRuntime.mark(function _callee4() {\r\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\r\n          while (1) {\r\n            switch (_context4.prev = _context4.next) {\r\n              case 0:\r\n                _context4.next = 2;\r\n                return this.getMediaStream(this.state.constraints);\r\n\r\n              case 2:\r\n                this.setVideoStream();\r\n                window.addEventListener('resize', this.handleResize);\r\n\r\n              case 4:\r\n              case \"end\":\r\n                return _context4.stop();\r\n            }\r\n          }\r\n        }, _callee4, this);\r\n      }));\r\n\r\n      function componentDidMount() {\r\n        return _componentDidMount.apply(this, arguments);\r\n      }\r\n\r\n      return componentDidMount;\r\n    }()\r\n  }, {\r\n    key: \"componentWillUnmount\",\r\n    value: function componentWillUnmount() {\r\n      this.stopMediaStream();\r\n      window.removeEventListener('resize', this.handleResize);\r\n    }\r\n  }, {\r\n    key: \"getMediaStream\",\r\n    value: function () {\r\n      var _getMediaStream = _asyncToGenerator(\r\n      /*#__PURE__*/\r\n      _regeneratorRuntime.mark(function _callee5() {\r\n        var constraints,\r\n            mediaStream,\r\n            _args5 = arguments;\r\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\r\n          while (1) {\r\n            switch (_context5.prev = _context5.next) {\r\n              case 0:\r\n                constraints = _args5.length > 0 && _args5[0] !== undefined ? _args5[0] : {};\r\n                _context5.prev = 1;\r\n                _context5.next = 4;\r\n                return navigator.mediaDevices.getUserMedia(constraints);\r\n\r\n              case 4:\r\n                mediaStream = _context5.sent;\r\n                this.setState({\r\n                  mediaStream: mediaStream\r\n                });\r\n                _context5.next = 12;\r\n                break;\r\n\r\n              case 8:\r\n                _context5.prev = 8;\r\n                _context5.t0 = _context5[\"catch\"](1);\r\n                console.log(_context5.t0);\r\n                this.setState({\r\n                  error: errorTypes.UNSUPPORTED.type\r\n                });\r\n\r\n              case 12:\r\n              case \"end\":\r\n                return _context5.stop();\r\n            }\r\n          }\r\n        }, _callee5, this, [[1, 8]]);\r\n      }));\r\n\r\n      function getMediaStream() {\r\n        return _getMediaStream.apply(this, arguments);\r\n      }\r\n\r\n      return getMediaStream;\r\n    }()\r\n  }, {\r\n    key: \"takePhoto\",\r\n    value: function () {\r\n      var _takePhoto = _asyncToGenerator(\r\n      /*#__PURE__*/\r\n      _regeneratorRuntime.mark(function _callee6(imageCapture) {\r\n        var onTakePhoto, blob, capturedImg;\r\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\r\n          while (1) {\r\n            switch (_context6.prev = _context6.next) {\r\n              case 0:\r\n                _context6.prev = 0;\r\n                onTakePhoto = this.props.onTakePhoto;\r\n                _context6.next = 4;\r\n                return imageCapture.takePhoto();\r\n\r\n              case 4:\r\n                blob = _context6.sent;\r\n                capturedImg = URL.createObjectURL(blob);\r\n\r\n                if (onTakePhoto) {\r\n                  onTakePhoto(capturedImg);\r\n                }\r\n\r\n                _context6.next = 12;\r\n                break;\r\n\r\n              case 9:\r\n                _context6.prev = 9;\r\n                _context6.t0 = _context6[\"catch\"](0);\r\n                this.setState({\r\n                  error: errorTypes.TAKE_PHOTO_FAILURE.type\r\n                });\r\n\r\n              case 12:\r\n              case \"end\":\r\n                return _context6.stop();\r\n            }\r\n          }\r\n        }, _callee6, this, [[0, 9]]);\r\n      }));\r\n\r\n      function takePhoto(_x) {\r\n        return _takePhoto.apply(this, arguments);\r\n      }\r\n\r\n      return takePhoto;\r\n    }()\r\n  }, {\r\n    key: \"setVideoStream\",\r\n    value: function setVideoStream() {\r\n      var _this2 = this;\r\n\r\n      var mediaStream = this.state.mediaStream;\r\n\r\n      if (this.video) {\r\n        this.video.srcObject = mediaStream;\r\n\r\n        this.video.onloadedmetadata = function () {\r\n          return _this2.video.play();\r\n        };\r\n      }\r\n    }\r\n  }, {\r\n    key: \"stopMediaStream\",\r\n    value: function stopMediaStream() {\r\n      if (this.video && this.video.srcObject) {\r\n        var onStopMediaStream = this.props.onStopMediaStream;\r\n        this.video.srcObject.getTracks().forEach(function (t) {\r\n          return t.stop();\r\n        });\r\n\r\n        if (onStopMediaStream) {\r\n          onStopMediaStream();\r\n        }\r\n      }\r\n    }\r\n  }, {\r\n    key: \"render\",\r\n    value: function render() {\r\n      var _this3 = this;\r\n\r\n      var _this$props2 = this.props,\r\n          captureButtonRenderer = _this$props2.captureButtonRenderer,\r\n          responsive = _this$props2.responsive;\r\n      var _this$state = this.state,\r\n          _this$state$constrain3 = _this$state.constraints,\r\n          constraints = _this$state$constrain3 === void 0 ? {} : _this$state$constrain3,\r\n          devices = _this$state.devices,\r\n          error = _this$state.error;\r\n      var multipleDevices = devices && devices.length > 1;\r\n      var facingMode = constraints.video.facingMode;\r\n\r\n      if (error) {\r\n        return React__default.createElement(CameraError, {\r\n          errorType: error\r\n        });\r\n      }\r\n\r\n      return React__default.createElement(CameraWrapper, null, React__default.createElement(\"video\", {\r\n        autoPlay: true,\r\n        playsInline: true,\r\n        ref: function ref(video) {\r\n          return _this3.video = video;\r\n        },\r\n        style: responsive ? {\r\n          background: 'black',\r\n          display: 'block',\r\n          width: '100%'\r\n        } : {\r\n          background: 'black',\r\n          display: 'block'\r\n        }\r\n      }), React__default.createElement(CameraControls, null, captureButtonRenderer ? captureButtonRenderer(this.captureMediaStream) : React__default.createElement(CaptureButton, {\r\n        onCapture: this.captureMediaStream\r\n      })), multipleDevices && React__default.createElement(SwitchModeButton, {\r\n        currentFacingMode: facingMode,\r\n        onSwitch: this.changeFacingMode\r\n      }));\r\n    }\r\n  }]);\r\n\r\n  return Camera;\r\n}(React.PureComponent);\r\n\r\nCamera.defaultProps = {\r\n  facingMode: facingModes.ENVIRONMENT,\r\n  responsive: true\r\n};\r\nCamera.propTypes = {\r\n  captureButtonRenderer: PropTypes.func,\r\n  facingMode: PropTypes.string,\r\n  height: PropTypes.number,\r\n  onStopMediaStream: PropTypes.func,\r\n  onTakePhoto: PropTypes.func,\r\n  responsive: PropTypes.bool,\r\n  width: PropTypes.number\r\n};\r\n\r\nmodule.exports = Camera;\r\n"]},"metadata":{},"sourceType":"script"}