{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\siwar\\\\Desktop\\\\front\\\\src\\\\user\\\\components\\\\screens\\\\PrivateScreen.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Header from '../Header';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { fetchconnectuser, selectoneuser, selectSessionUser } from \"../../../redux/slices/userSlice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst PrivateScreen = ({\n  history\n}) => {\n  _s();\n\n  const [error, setError] = useState(\"\");\n  const [privateData, setPrivateData] = useState(\"\");\n  useEffect(() => {\n    if (!localStorage.getItem(\"authToken\")) {\n      history.push(\"/login\");\n    }\n\n    const fetchPrivateData = async () => {\n      const config = {\n        headers: {\n          \"Content-Type\": \"appliation/json\",\n          Authorization: `Bearer ${localStorage.getItem(\"authToken\")}`\n        }\n      };\n\n      try {\n        const {\n          data\n        } = await axios.get(\"/api/private\", config);\n        setPrivateData(data.data);\n      } catch (error) {\n        localStorage.removeItem(\"authToken\");\n        setError(\"You are not authorized please login !!\");\n      }\n    };\n\n    fetchPrivateData();\n  }, [history]);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(fetchconnectuser());\n  }, [dispatch]);\n  const user = useSelector(selectSessionUser)[0];\n  localStorage.setItem(\"role\", user.role);\n  localStorage.setItem(\"connecteduser\", user._id);\n\n  const logoutHandler = () => {\n    localStorage.removeItem(\"authToken\");\n    history.push(\"/login\");\n  };\n\n  return error ? /*#__PURE__*/_jsxDEV(\"span\", {\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 9\n  }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 8\n    }, this)\n  }, void 0, false);\n};\n\n_s(PrivateScreen, \"fLTnMqYzW+7eLQoKG7DKo9hXeFA=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = PrivateScreen;\nexport default PrivateScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"PrivateScreen\");","map":{"version":3,"sources":["C:/Users/siwar/Desktop/front/src/user/components/screens/PrivateScreen.js"],"names":["React","useState","useEffect","axios","Header","useDispatch","useSelector","fetchconnectuser","selectoneuser","selectSessionUser","PrivateScreen","history","error","setError","privateData","setPrivateData","localStorage","getItem","push","fetchPrivateData","config","headers","Authorization","data","get","removeItem","dispatch","user","setItem","role","_id","logoutHandler"],"mappings":";;;AAAA,OAAOA,KAAP,IAAcC,QAAd,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAwC,aAAxC;AACA,SAAQC,gBAAR,EAAyBC,aAAzB,EAAuCC,iBAAvC,QAA+D,iCAA/D;;;;AAEA,MAAMC,aAAa,GAAG,CAAC;AAACC,EAAAA;AAAD,CAAD,KAAe;AAAA;;AACjC,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAmBZ,QAAQ,CAAC,EAAD,CAAjC;AACA,QAAM,CAACa,WAAD,EAAcC,cAAd,IAA+Bd,QAAQ,CAAC,EAAD,CAA7C;AAGAC,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAG,CAACc,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAJ,EAAsC;AAClCN,MAAAA,OAAO,CAACO,IAAR,CAAa,QAAb;AACH;;AAED,UAAMC,gBAAgB,GAAG,YAAW;AAChC,YAAMC,MAAM,GAAG;AACXC,QAAAA,OAAO,EAAE;AACL,0BAAe,iBADV;AAELC,UAAAA,aAAa,EAAG,UAASN,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAkC;AAFtD;AADE,OAAf;;AAOA,UAAI;AACA,cAAM;AAACM,UAAAA;AAAD,YAAS,MAAMpB,KAAK,CAACqB,GAAN,CAAU,cAAV,EAAyBJ,MAAzB,CAArB;AACAL,QAAAA,cAAc,CAACQ,IAAI,CAACA,IAAN,CAAd;AACH,OAHD,CAGE,OAAOX,KAAP,EAAc;AACZI,QAAAA,YAAY,CAACS,UAAb,CAAwB,WAAxB;AACAZ,QAAAA,QAAQ,CAAC,wCAAD,CAAR;AACH;AACJ,KAfD;;AAgBAM,IAAAA,gBAAgB;AACnB,GAtBQ,EAsBP,CAACR,OAAD,CAtBO,CAAT;AAuBJ,QAAMe,QAAQ,GAAGrB,WAAW,EAA5B;AAECH,EAAAA,SAAS,CAAC,MAAM;AACTwB,IAAAA,QAAQ,CAACnB,gBAAgB,EAAjB,CAAR;AACC,GAFC,EAEC,CAACmB,QAAD,CAFD,CAAT;AAGO,QAAMC,IAAI,GAACrB,WAAW,CAACG,iBAAD,CAAX,CAA+B,CAA/B,CAAX;AAEAO,EAAAA,YAAY,CAACY,OAAb,CAAqB,MAArB,EAA8BD,IAAI,CAACE,IAAnC;AACDb,EAAAA,YAAY,CAACY,OAAb,CAAqB,eAArB,EAAuCD,IAAI,CAACG,GAA5C;;AACH,QAAMC,aAAa,GAAG,MAAM;AACxBf,IAAAA,YAAY,CAACS,UAAb,CAAwB,WAAxB;AACAd,IAAAA,OAAO,CAACO,IAAR,CAAa,QAAb;AACH,GAHD;;AAKA,SAAON,KAAK,gBACR;AAAA,cAAOA;AAAP;AAAA;AAAA;AAAA;AAAA,UADQ,gBAGR;AAAA,2BAKD,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AALC,mBAHJ;AAYH,CAtDD;;GAAMF,a;UA4BWL,W,EAKEC,W;;;KAjCbI,a;AAwDN,eAAeA,aAAf","sourcesContent":["import React,{useState , useEffect} from 'react';\r\nimport axios from 'axios';\r\nimport Header from '../Header';\r\nimport { useDispatch ,useSelector} from 'react-redux';\r\nimport {fetchconnectuser,selectoneuser,selectSessionUser} from \"../../../redux/slices/userSlice\";\r\n\r\nconst PrivateScreen = ({history}) => {\r\n    const [error, setError]= useState(\"\");\r\n    const [privateData, setPrivateData]= useState(\"\");\r\n\r\n\r\n    useEffect(() => {\r\n        if(!localStorage.getItem(\"authToken\")){\r\n            history.push(\"/login\")\r\n        }\r\n\r\n        const fetchPrivateData = async () =>{\r\n            const config = {\r\n                headers: {\r\n                    \"Content-Type\":\"appliation/json\",\r\n                    Authorization: `Bearer ${localStorage.getItem(\"authToken\")}`\r\n                }\r\n            }\r\n\r\n            try {\r\n                const {data} = await axios.get(\"/api/private\",config);\r\n                setPrivateData(data.data);\r\n            } catch (error) {\r\n                localStorage.removeItem(\"authToken\");\r\n                setError(\"You are not authorized please login !!\")\r\n            }\r\n        }\r\n        fetchPrivateData();\r\n    },[history]);\r\nconst dispatch = useDispatch();\r\n\r\n useEffect(() => {\r\n        dispatch(fetchconnectuser());\r\n        }, [dispatch]);\r\n        const user=useSelector(selectSessionUser)[0];\r\n      \r\n        localStorage.setItem(\"role\" , user.role);\r\n       localStorage.setItem(\"connecteduser\" , user._id);\r\n    const logoutHandler = () => {\r\n        localStorage.removeItem(\"authToken\");\r\n        history.push(\"/login\");\r\n    };\r\n\r\n    return error ? (\r\n        <span>{error}</span>\r\n    ) : (\r\n        <>\r\n      {/**  \r\n       <div style={{ background: \"green\", color: \"white\" }}>{privateData.map(home => <div>{home.data}</div>)}</div>\r\n       <button onClick={logoutHandler}>Logout</button>\r\n       */} \r\n       <Header/>\r\n        \r\n        </>\r\n    );\r\n};\r\n\r\nexport default PrivateScreen;"]},"metadata":{},"sourceType":"module"}