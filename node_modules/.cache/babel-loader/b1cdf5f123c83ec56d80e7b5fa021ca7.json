{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\siwar\\\\Desktop\\\\front\\\\src\\\\user\\\\components\\\\Post\\\\PostItem.js\",\n    _s = $RefreshSig$();\n\n/* eslint-disable jsx-a11y/alt-text */\nimport axios from \"axios\";\nimport { useEffect, useRef, useState } from \"react\";\nimport Moment from \"react-moment\";\nimport FormInputComment from \"./FormInputComment\";\nimport io from \"socket.io-client\";\nimport CommentItemPost from \"./CommentItemPost\";\nimport { useDispatch } from \"react-redux\";\nimport { deletePost, getPosts } from \"../../../redux/actions/postAction\";\nimport \"./postItem.css\";\nimport EditPostPopup from \"./EditPostPopup\";\nimport ReactPlayer from \"react-player\";\nimport ListReactions from \"./ListReactions\";\nimport { FacebookButton } from \"react-social\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nlet username = \"607e1c25b6e3422b40b74213\";\nconst userconnected = localStorage.getItem(\"connecteduser\");\n/* eslint-disable jsx-a11y/anchor-is-valid */\n\nexport default function PostItem({\n  post,\n  key\n}) {\n  _s();\n\n  const [socket, setSocket] = useState(null);\n  const [comments, setComments] = useState([]);\n  const [loading, setloading] = useState(false);\n  const [nbComments, setnbComments] = useState(0);\n  const [moreComments, setmoreComments] = useState(0);\n  const [page, setPage] = useState(1);\n  const [next, setnext] = useState(3);\n  const pageEnd = useRef();\n  const [openPopup, setopenPopup] = useState(false);\n  const [showComments, setshowComments] = useState(true);\n  const [showReactions, setshowReactions] = useState(false);\n  const [nbReact, setnbReact] = useState(0);\n  const [reacted, setreacted] = useState(false);\n  const [openPopupReact, setopenPopupReact] = useState(false);\n  const [liketext, setliketext] = useState(\"Like\");\n  const dispatch = useDispatch();\n  useEffect(() => {\n    setloading(true);\n    axios.get(\"http://localhost:3000/pi/commentRoute/comment/\" + post._id + \"?limit=\" + page * 3).then(res => {\n      setComments(res.data.comments);\n      setloading(false);\n      setmoreComments(nbComments - 3);\n    }).catch(err => console.log(err.response.data.msg));\n    axios.get(\"http://localhost:3000/pi/commentRoute/nbcomment/\" + post._id).then(res => {\n      setnbComments(res.data.nbcomments);\n    });\n    const socket = io.connect(\"http://localhost:4000\");\n    setSocket(socket);\n    return () => socket.close();\n  }, [post._id, page, nbComments]); // RealTime\n\n  useEffect(() => {\n    if (socket) {\n      socket.emit(\"joinRoom\", post._id);\n    }\n  }, [socket, post._id]);\n  useEffect(() => {\n    if (socket) {\n      socket.on(\"sendCommentToClient\", msg => {\n        setComments([msg, ...comments]);\n        setnbComments(nbComments + 1);\n      });\n      return () => socket.off(\"sendCommentToClient\");\n    }\n  }, [socket, comments, nbComments]); //reply comments\n\n  useEffect(() => {\n    if (socket) {\n      socket.on(\"sendReplyCommentToClient\", msg => {\n        const newArr = [...comments];\n        newArr.forEach(cm => {\n          if (cm._id === msg._id) {\n            cm.reply = msg.reply;\n          }\n        });\n        setComments(newArr);\n      });\n      return () => socket.off(\"sendReplyCommentToClient\");\n    }\n  }, [socket, comments]); //comment Update\n\n  useEffect(() => {\n    if (socket) {\n      socket.on(\"commentUpdated\", msg => {\n        //setComments([msg, ...comments]);\n        axios.get(\"http://localhost:3000/pi/commentRoute/comment/\" + post._id + \"?limit=\" + page * 3).then(res => {\n          setComments(res.data.comments);\n          setloading(false);\n        });\n      });\n      return () => socket.off(\"commentUpdated\");\n    }\n  }, [socket, comments, page, post._id]); //comment Delete\n\n  useEffect(() => {\n    if (socket) {\n      socket.on(\"commentDeleted\", msg => {\n        //setComments([msg, ...comments]);\n        axios.get(\"http://localhost:3000/pi/commentRoute/comment/\" + post._id + \"?limit=\" + page * 3).then(res => {\n          setComments(res.data.comments);\n          setloading(false);\n          setnbComments(nbComments - 1);\n        });\n      });\n      return () => socket.off(\"commentDeleted\");\n    }\n  }, [socket, comments, page, post._id, nbComments]);\n\n  const loadMore = () => {\n    //loopWithSlice(next);\n    setPage(prev => prev + 1);\n    setmoreComments(comments.length - 3);\n  }; // Add Reaction\n\n\n  const addReaction = (name, image) => {\n    const post_id = post._id;\n    const reaction = {\n      name,\n      image,\n      post_id,\n      userconnected\n    };\n    axios.post(\"http://localhost:3000/pi/reactRoute/react\", reaction);\n    setshowReactions(false);\n    axios.get(\"http://localhost:3000/pi/reactRoute/nbreact/\" + post._id).then(res => setnbReact(res.data.result));\n    setreacted(true);\n  };\n\n  useEffect(() => {\n    axios.get(\"http://localhost:3000/pi/reactRoute/nbreact/\" + post._id).then(res => setnbReact(res.data.result));\n  }, [post._id]);\n  const upload = \"https://res.cloudinary.com/dojrd5swn/image/upload/\" + post.image || null; //Delete Reaction\n\n  const deleteReact = (postid, username) => {\n    axios.delete(\"http://localhost:3000/pi/reactRoute/reactone/\" + postid + \"/\" + userconnected);\n    setreacted(false);\n    setnbReact(nbReact - 1);\n  }; // Delete\n\n\n  const onDelete = id => {\n    dispatch(deletePost(id));\n    dispatch(getPosts());\n  };\n\n  const [showVideo, setshowVideo] = useState(false);\n  useEffect(() => {\n    var _post$image;\n\n    if ((_post$image = post.image) === null || _post$image === void 0 ? void 0 : _post$image.endsWith(\"mp4\")) {\n      setshowVideo(true);\n    }\n  }, [post.image]);\n  const [youtube, setyoutube] = useState(false);\n  const [dailyMotion, setdailyMotion] = useState(false);\n  useEffect(() => {\n    var _post$description, _post$description2;\n\n    if ((_post$description = post.description) === null || _post$description === void 0 ? void 0 : _post$description.includes(\"https://www.youtube.com/watch?\")) {\n      setyoutube(true);\n    }\n\n    if ((_post$description2 = post.description) === null || _post$description2 === void 0 ? void 0 : _post$description2.includes(\"https://www.dailymotion.com\")) {\n      setdailyMotion(true);\n    }\n  }, [post.description]); //check connected user\n\n  const [allowEdit, setallowEdit] = useState(false);\n  useEffect(() => {\n    if (post.username._id === userconnected) {\n      setallowEdit(true);\n    }\n  }, [post.username]); //share on facebook\n\n  let url = \"https://res.cloudinary.com/dojrd5swn/image/upload/\" + post.image;\n  let appId = \"818960815377406\";\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"bg-white shadow border border-gray-100 rounded-lg dark:bg-gray-900 lg:mx-0 uk-animation-slide-bottom-small\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"flex justify-between items-center lg:p-4 p-2.5\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"flex flex-1 items-center space-x-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"#\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: post.username.profilePicture,\n              class: \"bg-gray-200 border border-white rounded-full w-10 h-10\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"flex-1 font-semibold capitalize\",\n            children: [/*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"#\",\n              class: \"text-black\",\n              children: post.username.username\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"text-gray-700 flex items-center space-x-2\",\n              children: [/*#__PURE__*/_jsxDEV(Moment, {\n                fromNow: true,\n                children: post.createdAt\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 217,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"ion-icon\", {\n                name: \"people\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 11\n        }, this), allowEdit && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"#\",\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              class: \"icon-feather-more-horizontal text-2xl hover:bg-gray-200 rounded-full p-2 transition -mr-1 dark:hover:bg-gray-700\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"bg-white w-56 shadow-md mx-auto p-2 mt-12 rounded-md text-gray-500  text-base border border-gray-100 dark:bg-gray-900 dark:text-gray-100 dark:border-gray-700\",\n            \"uk-drop\": \"mode: click;pos: bottom-right;animation: uk-animation-slide-bottom-small\",\n            children: /*#__PURE__*/_jsxDEV(\"ul\", {\n              class: \"space-y-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"li\", {\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  onClick: () => setopenPopup(true),\n                  class: \"flex items-center px-3 py-2 hover:bg-gray-200 hover:text-gray-800 rounded-md dark:hover:bg-gray-800\",\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    class: \"uil-edit-alt mr-1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 238,\n                    columnNumber: 23\n                  }, this), \" Edit Post\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 234,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 19\n              }, this), showComments && /*#__PURE__*/_jsxDEV(\"li\", {\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  class: \"flex items-center px-3 py-2 hover:bg-gray-200 hover:text-gray-800 rounded-md dark:hover:bg-gray-800\",\n                  onClick: () => setshowComments(false),\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    class: \"uil-comment-slash mr-1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 247,\n                    columnNumber: 25\n                  }, this), \" Disable comments\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 243,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 21\n              }, this), !showComments && /*#__PURE__*/_jsxDEV(\"li\", {\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  class: \"flex items-center px-3 py-2 hover:bg-gray-200 hover:text-gray-800 rounded-md dark:hover:bg-gray-800\",\n                  onClick: () => setshowComments(true),\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    class: \"uil-comment mr-1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 257,\n                    columnNumber: 25\n                  }, this), \" Enable comments\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 253,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: /*#__PURE__*/_jsxDEV(\"hr\", {\n                  class: \"-mx-2 my-2 dark:border-gray-800\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 263,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  onClick: () => onDelete(post._id),\n                  class: \"flex items-center px-3 py-2 text-red-500 hover:bg-red-100 hover:text-red-500 rounded-md dark:hover:bg-red-600\",\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    class: \"uil-trash-alt mr-1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 270,\n                    columnNumber: 23\n                  }, this), \" Delete\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 266,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 232,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"p-3 border-b dark:border-gray-700\",\n        children: post.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        \"uk-lightbox\": true,\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"assets/user/images/avatars/avatar-lg-3.jpg\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: upload,\n            alt: \"\",\n            class: \"max-h-96 w-full object-cover\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 13\n          }, this), showVideo && /*#__PURE__*/_jsxDEV(\"video\", {\n            controls: true,\n            children: /*#__PURE__*/_jsxDEV(\"source\", {\n              src: upload,\n              type: \"video/mp4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 15\n          }, this), (youtube || dailyMotion) && /*#__PURE__*/_jsxDEV(ReactPlayer, {\n            url: post.description,\n            controls: true,\n            width: \"100%\",\n            config: {\n              youtube: {\n                playerVars: {\n                  showinfo: 1\n                }\n              },\n              dailymotion: {}\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 15\n          }, this), \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 9\n      }, this), showReactions && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reactions\",\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"emoji\",\n          onClick: () => {\n            addReaction(\"Like\", \"like.gif\");\n            setliketext(\"Like\");\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"assets/user/images/post/like.gif\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Like\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 314,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"emoji\",\n          onClick: () => {\n            addReaction(\"Love\", \"love.gif\");\n            setliketext(\"Love\");\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"assets/user/images/post/love.gif\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Love\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"emoji\",\n          onClick: () => {\n            addReaction(\"Haha\", \"laugh.gif\");\n            setliketext(\"Haha\");\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"assets/user/images/post/laugh.gif\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Haha\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"emoji\",\n          onClick: () => {\n            addReaction(\"Wow\", \"wow.gif\");\n            setliketext(\"Wow\");\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"assets/user/images/post/wow.gif\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Wow\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"emoji\",\n          onClick: () => {\n            addReaction(\"Sad\", \"sad.gif\");\n            setliketext(\"Sad\");\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"assets/user/images/post/sad.gif\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Sad\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 355,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"emoji\",\n          onClick: () => {\n            addReaction(\"Angry\", \"angry.gif\");\n            setliketext(\"Angry\");\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"assets/user/images/post/angry.gif\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Angry\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"p-4 space-y-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"flex space-x-4 lg:font-bold\",\n          children: [!reacted && /*#__PURE__*/_jsxDEV(\"a\", {\n            onMouseEnter: () => {\n              setshowReactions(true);\n            },\n            onMouseLeave: () => {\n              setTimeout(() => setshowReactions(false), 4000);\n            },\n            style: {\n              cursor: \"pointer\"\n            },\n            class: \"flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"p-2 rounded-full text-black lg:bg-gray-100\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                viewBox: \"0 0 20 20\",\n                fill: \"currentColor\",\n                width: \"22\",\n                height: \"22\",\n                class: \"dark:text-gray-100\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 391,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 383,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: \" Like\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 15\n          }, this), reacted && /*#__PURE__*/_jsxDEV(\"a\", {\n            onClick: () => {\n              deleteReact(post._id, userconnected);\n            },\n            style: {\n              cursor: \"pointer\"\n            },\n            class: \"flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"p-2 rounded-full text-black lg:bg-gray-100\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                viewBox: \"0 0 20 20\",\n                fill: \"currentColor\",\n                width: \"22\",\n                height: \"22\",\n                class: \"dark:text-gray-100\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 414,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 406,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 405,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                color: \"#EF4444\"\n              },\n              children: [\" \", liketext]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 418,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            class: \"flex items-center space-x-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"p-2 rounded-full text-black lg:bg-gray-100\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                viewBox: \"0 0 20 20\",\n                fill: \"currentColor\",\n                width: \"22\",\n                height: \"22\",\n                class: \"dark:text-gray-100\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  \"fill-rule\": \"evenodd\",\n                  d: \"M18 5v8a2 2 0 01-2 2h-5l-5 4v-4H4a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2zM7 8H5v2h2V8zm2 0h2v2H9V8zm6 0h-2v2h2V8z\",\n                  \"clip-rule\": \"evenodd\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 432,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 424,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: \" Comment\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 439,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            class: \"flex items-center space-x-2 flex-1 justify-end\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"p-2 rounded-full text-black lg:bg-gray-100\",\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                viewBox: \"0 0 20 20\",\n                fill: \"currentColor\",\n                width: \"22\",\n                height: \"22\",\n                class: \"dark:text-gray-100\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 452,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 444,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 443,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(FacebookButton, {\n              url: url,\n              appId: appId,\n              children: \"Share\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 455,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 442,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"flex items-center space-x-3 pt-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"assets/user/images/avatars/avatar-1.jpg\",\n              alt: \"\",\n              class: \"w-6 h-6 rounded-full border-2 border-white dark:border-gray-900\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 462,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"assets/user/images/post/avatar-4.jpg\",\n              alt: \"\",\n              class: \"w-6 h-6 rounded-full border-2 border-white dark:border-gray-900 -ml-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 467,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n              src: \"assets/user/images/avatars/avatar-2.jpg\",\n              alt: \"\",\n              class: \"w-6 h-6 rounded-full border-2 border-white dark:border-gray-900 -ml-2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 472,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"dark:text-gray-100\",\n            children: [nbReact, \" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \" \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 479,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setopenPopupReact(true),\n              children: [\" \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \" Likes \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 482,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 480,\n              columnNumber: 15\n            }, this), \"    |    \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: [nbComments, \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 485,\n              columnNumber: 15\n            }, this), \"comments\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 478,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"border-t py-4 space-y-4 dark:border-gray-600\",\n          children: comments.map(comment => /*#__PURE__*/_jsxDEV(CommentItemPost, {\n            showCommentss: showComments,\n            comment: comment,\n            socket: socket\n          }, comment._id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 492,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 490,\n          columnNumber: 11\n        }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 500,\n          columnNumber: 23\n        }, this), nbComments - comments.length > 0 && /*#__PURE__*/_jsxDEV(\"a\", {\n          onClick: loadMore,\n          class: \"hover:text-blue-600 hover:underline\",\n          children: [\"View \", nbComments - comments.length, \" more Comments\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 502,\n          columnNumber: 13\n        }, this), showComments && /*#__PURE__*/_jsxDEV(FormInputComment, {\n          id: post._id,\n          socket: socket\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 507,\n          columnNumber: 28\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ListReactions, {\n      id: post._id,\n      openPopup: openPopupReact,\n      setopenPopup: setopenPopupReact\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 510,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(EditPostPopup, {\n      openPopup: openPopup,\n      post: post,\n      setopenPopup: setopenPopup\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 516,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n\n_s(PostItem, \"8ZyhkAxD7/EKdGr5iEsF9i7qKRM=\", false, function () {\n  return [useDispatch];\n});\n\n_c = PostItem;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostItem\");","map":{"version":3,"sources":["C:/Users/siwar/Desktop/front/src/user/components/Post/PostItem.js"],"names":["axios","useEffect","useRef","useState","Moment","FormInputComment","io","CommentItemPost","useDispatch","deletePost","getPosts","EditPostPopup","ReactPlayer","ListReactions","FacebookButton","Link","username","userconnected","localStorage","getItem","PostItem","post","key","socket","setSocket","comments","setComments","loading","setloading","nbComments","setnbComments","moreComments","setmoreComments","page","setPage","next","setnext","pageEnd","openPopup","setopenPopup","showComments","setshowComments","showReactions","setshowReactions","nbReact","setnbReact","reacted","setreacted","openPopupReact","setopenPopupReact","liketext","setliketext","dispatch","get","_id","then","res","data","catch","err","console","log","response","msg","nbcomments","connect","close","emit","on","off","newArr","forEach","cm","reply","loadMore","prev","length","addReaction","name","image","post_id","reaction","result","upload","deleteReact","postid","delete","onDelete","id","showVideo","setshowVideo","endsWith","youtube","setyoutube","dailyMotion","setdailyMotion","description","includes","allowEdit","setallowEdit","url","appId","profilePicture","createdAt","playerVars","showinfo","dailymotion","setTimeout","cursor","color","map","comment"],"mappings":"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","sourcesContent":["/* eslint-disable jsx-a11y/alt-text */\r\n\r\nimport axios from \"axios\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport Moment from \"react-moment\";\r\nimport FormInputComment from \"./FormInputComment\";\r\nimport io from \"socket.io-client\";\r\nimport CommentItemPost from \"./CommentItemPost\";\r\n\r\nimport { useDispatch } from \"react-redux\";\r\nimport { deletePost, getPosts } from \"../../../redux/actions/postAction\";\r\nimport \"./postItem.css\";\r\nimport EditPostPopup from \"./EditPostPopup\";\r\nimport ReactPlayer from \"react-player\";\r\nimport ListReactions from \"./ListReactions\";\r\nimport { FacebookButton } from \"react-social\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nlet username = \"607e1c25b6e3422b40b74213\";\r\nconst userconnected = localStorage.getItem(\"connecteduser\");\r\n/* eslint-disable jsx-a11y/anchor-is-valid */\r\nexport default function PostItem({ post, key }) {\r\n  const [socket, setSocket] = useState(null);\r\n  const [comments, setComments] = useState([]);\r\n  const [loading, setloading] = useState(false);\r\n  const [nbComments, setnbComments] = useState(0);\r\n  const [moreComments, setmoreComments] = useState(0);\r\n  const [page, setPage] = useState(1);\r\n  const [next, setnext] = useState(3);\r\n  const pageEnd = useRef();\r\n  const [openPopup, setopenPopup] = useState(false);\r\n  const [showComments, setshowComments] = useState(true);\r\n  const [showReactions, setshowReactions] = useState(false);\r\n  const [nbReact, setnbReact] = useState(0);\r\n  const [reacted, setreacted] = useState(false);\r\n  const [openPopupReact, setopenPopupReact] = useState(false);\r\n  const [liketext, setliketext] = useState(\"Like\");\r\n\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    setloading(true);\r\n    axios\r\n      .get(\"http://localhost:3000/pi/commentRoute/comment/\" + post._id + \"?limit=\" + page * 3)\r\n      .then((res) => {\r\n        setComments(res.data.comments);\r\n        setloading(false);\r\n        setmoreComments(nbComments - 3);\r\n      })\r\n      .catch((err) => console.log(err.response.data.msg));\r\n    axios.get(\"http://localhost:3000/pi/commentRoute/nbcomment/\" + post._id).then((res) => {\r\n      setnbComments(res.data.nbcomments);\r\n    });\r\n    const socket = io.connect(\"http://localhost:4000\");\r\n    setSocket(socket);\r\n\r\n    return () => socket.close();\r\n  }, [post._id, page, nbComments]);\r\n\r\n  // RealTime\r\n  useEffect(() => {\r\n    if (socket) {\r\n      socket.emit(\"joinRoom\", post._id);\r\n    }\r\n  }, [socket, post._id]);\r\n\r\n  useEffect(() => {\r\n    if (socket) {\r\n      socket.on(\"sendCommentToClient\", (msg) => {\r\n        setComments([msg, ...comments]);\r\n     \r\n        setnbComments(nbComments + 1);\r\n      });\r\n      return () => socket.off(\"sendCommentToClient\");\r\n    }\r\n  }, [socket, comments, nbComments]);\r\n\r\n  //reply comments\r\n\r\n  useEffect(() => {\r\n    if (socket) {\r\n      socket.on(\"sendReplyCommentToClient\", (msg) => {\r\n  \r\n        const newArr = [...comments];\r\n        newArr.forEach((cm) => {\r\n          if (cm._id === msg._id) {\r\n            cm.reply = msg.reply;\r\n          }\r\n        });\r\n        setComments(newArr);\r\n      });\r\n      return () => socket.off(\"sendReplyCommentToClient\");\r\n    }\r\n  }, [socket, comments]);\r\n\r\n  //comment Update\r\n  useEffect(() => {\r\n    if (socket) {\r\n      socket.on(\"commentUpdated\", (msg) => {\r\n        //setComments([msg, ...comments]);\r\n      \r\n        axios\r\n          .get(\"http://localhost:3000/pi/commentRoute/comment/\" + post._id + \"?limit=\" + page * 3)\r\n          .then((res) => {\r\n            setComments(res.data.comments);\r\n            setloading(false);\r\n          });\r\n      });\r\n      return () => socket.off(\"commentUpdated\");\r\n    }\r\n  }, [socket, comments, page, post._id]);\r\n\r\n  //comment Delete\r\n  useEffect(() => {\r\n    if (socket) {\r\n      socket.on(\"commentDeleted\", (msg) => {\r\n        //setComments([msg, ...comments]);\r\n        axios\r\n          .get(\"http://localhost:3000/pi/commentRoute/comment/\" + post._id + \"?limit=\" + page * 3)\r\n          .then((res) => {\r\n            setComments(res.data.comments);\r\n            setloading(false);\r\n            setnbComments(nbComments - 1);\r\n          });\r\n    \r\n      });\r\n      return () => socket.off(\"commentDeleted\");\r\n    }\r\n  }, [socket, comments, page, post._id, nbComments]);\r\n\r\n  const loadMore = () => {\r\n    //loopWithSlice(next);\r\n    setPage((prev) => prev + 1);\r\n    setmoreComments(comments.length - 3);\r\n  };\r\n\r\n  // Add Reaction\r\n  const addReaction = (name, image) => {\r\n    const post_id = post._id;\r\n\r\n    const reaction = { name, image, post_id, userconnected };\r\n    axios.post(\"http://localhost:3000/pi/reactRoute/react\", reaction);\r\n\r\n    setshowReactions(false);\r\n    axios\r\n      .get(\"http://localhost:3000/pi/reactRoute/nbreact/\" + post._id)\r\n      .then((res) => setnbReact(res.data.result));\r\n    setreacted(true);\r\n  };\r\n  useEffect(() => {\r\n    axios\r\n      .get(\"http://localhost:3000/pi/reactRoute/nbreact/\" + post._id)\r\n      .then((res) => setnbReact(res.data.result));\r\n  }, [post._id]);\r\n\r\n\r\n  const upload = \"https://res.cloudinary.com/dojrd5swn/image/upload/\" + post.image || null;\r\n\r\n  //Delete Reaction\r\n  const deleteReact = (postid, username) => {\r\n    axios.delete(\"http://localhost:3000/pi/reactRoute/reactone/\" + postid + \"/\" + userconnected);\r\n    setreacted(false);\r\n    setnbReact(nbReact - 1);\r\n  };\r\n\r\n  // Delete\r\n  const onDelete = (id) => {\r\n    dispatch(deletePost(id));\r\n    dispatch(getPosts());\r\n  };\r\n\r\n  const [showVideo, setshowVideo] = useState(false);\r\n  useEffect(() => {\r\n    if (post.image?.endsWith(\"mp4\")) {\r\n      setshowVideo(true);\r\n    }\r\n  }, [post.image]);\r\n\r\n  const [youtube, setyoutube] = useState(false);\r\n  const [dailyMotion, setdailyMotion] = useState(false);\r\n  useEffect(() => {\r\n    if (post.description?.includes(\"https://www.youtube.com/watch?\")) {\r\n      setyoutube(true);\r\n    }\r\n    if (post.description?.includes(\"https://www.dailymotion.com\")) {\r\n      setdailyMotion(true);\r\n    }\r\n  }, [post.description]);\r\n\r\n  //check connected user\r\n\r\n  const [allowEdit, setallowEdit] = useState(false);\r\n  useEffect(() => {\r\n    if (post.username._id === userconnected) {\r\n      setallowEdit(true);\r\n    }\r\n  }, [post.username]);\r\n\r\n  //share on facebook\r\n  let url = \"https://res.cloudinary.com/dojrd5swn/image/upload/\" + post.image;\r\n  let appId = \"818960815377406\";\r\n  return (\r\n    <>\r\n      <div class=\"bg-white shadow border border-gray-100 rounded-lg dark:bg-gray-900 lg:mx-0 uk-animation-slide-bottom-small\">\r\n        <div class=\"flex justify-between items-center lg:p-4 p-2.5\">\r\n          <div class=\"flex flex-1 items-center space-x-4\">\r\n            <a href=\"#\">\r\n              <img\r\n                src={post.username.profilePicture}\r\n                class=\"bg-gray-200 border border-white rounded-full w-10 h-10\"\r\n              />\r\n            </a>\r\n            <div class=\"flex-1 font-semibold capitalize\">\r\n              <a href=\"#\" class=\"text-black\">\r\n                {post.username.username}\r\n              </a>\r\n              <div class=\"text-gray-700 flex items-center space-x-2\">\r\n                <Moment fromNow>{post.createdAt}</Moment>\r\n                <ion-icon name=\"people\"></ion-icon>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {allowEdit && (\r\n            <div>\r\n              <a href=\"#\">\r\n                <i class=\"icon-feather-more-horizontal text-2xl hover:bg-gray-200 rounded-full p-2 transition -mr-1 dark:hover:bg-gray-700\"></i>\r\n              </a>\r\n              <div\r\n                class=\"bg-white w-56 shadow-md mx-auto p-2 mt-12 rounded-md text-gray-500  text-base border border-gray-100 dark:bg-gray-900 dark:text-gray-100 dark:border-gray-700\"\r\n                uk-drop=\"mode: click;pos: bottom-right;animation: uk-animation-slide-bottom-small\"\r\n              >\r\n                <ul class=\"space-y-1\">\r\n                  <li>\r\n                    <a\r\n                      onClick={() => setopenPopup(true)}\r\n                      class=\"flex items-center px-3 py-2 hover:bg-gray-200 hover:text-gray-800 rounded-md dark:hover:bg-gray-800\"\r\n                    >\r\n                      <i class=\"uil-edit-alt mr-1\"></i> Edit Post\r\n                    </a>\r\n                  </li>\r\n                  {showComments && (\r\n                    <li>\r\n                      <a\r\n                        class=\"flex items-center px-3 py-2 hover:bg-gray-200 hover:text-gray-800 rounded-md dark:hover:bg-gray-800\"\r\n                        onClick={() => setshowComments(false)}\r\n                      >\r\n                        <i class=\"uil-comment-slash mr-1\"></i> Disable comments\r\n                      </a>\r\n                    </li>\r\n                  )}\r\n                  {!showComments && (\r\n                    <li>\r\n                      <a\r\n                        class=\"flex items-center px-3 py-2 hover:bg-gray-200 hover:text-gray-800 rounded-md dark:hover:bg-gray-800\"\r\n                        onClick={() => setshowComments(true)}\r\n                      >\r\n                        <i class=\"uil-comment mr-1\"></i> Enable comments\r\n                      </a>\r\n                    </li>\r\n                  )}\r\n\r\n                  <li>\r\n                    <hr class=\"-mx-2 my-2 dark:border-gray-800\"></hr>\r\n                  </li>\r\n                  <li>\r\n                    <a\r\n                      onClick={() => onDelete(post._id)}\r\n                      class=\"flex items-center px-3 py-2 text-red-500 hover:bg-red-100 hover:text-red-500 rounded-md dark:hover:bg-red-600\"\r\n                    >\r\n                      <i class=\"uil-trash-alt mr-1\"></i> Delete\r\n                    </a>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n        <div class=\"p-3 border-b dark:border-gray-700\">{post.description}</div>\r\n        <div uk-lightbox>\r\n          <a href=\"assets/user/images/avatars/avatar-lg-3.jpg\">\r\n            <img src={upload} alt=\"\" class=\"max-h-96 w-full object-cover\" />\r\n            {showVideo && (\r\n              <video controls>\r\n                <source src={upload} type=\"video/mp4\"></source>\r\n              </video>\r\n            )}\r\n            {(youtube || dailyMotion) && (\r\n              <ReactPlayer\r\n                url={post.description}\r\n                controls={true}\r\n                width=\"100%\"\r\n                config={{\r\n                  youtube: {\r\n                    playerVars: { showinfo: 1 },\r\n                  },\r\n\r\n                  dailymotion: {},\r\n                }}\r\n              />\r\n            )}\r\n            )\r\n          </a>\r\n        </div>\r\n        {showReactions && (\r\n          <div className=\"reactions\">\r\n            <a\r\n              className=\"emoji\"\r\n              onClick={() => {\r\n                addReaction(\"Like\", \"like.gif\");\r\n                setliketext(\"Like\");\r\n              }}\r\n            >\r\n              <img src=\"assets/user/images/post/like.gif\" />\r\n              <p>Like</p>\r\n            </a>\r\n            <a\r\n              className=\"emoji\"\r\n              onClick={() => {\r\n                addReaction(\"Love\", \"love.gif\");\r\n                setliketext(\"Love\");\r\n              }}\r\n            >\r\n              <img src=\"assets/user/images/post/love.gif\" />\r\n              <p>Love</p>\r\n            </a>\r\n\r\n            <a\r\n              className=\"emoji\"\r\n              onClick={() => {\r\n                addReaction(\"Haha\", \"laugh.gif\");\r\n                setliketext(\"Haha\");\r\n              }}\r\n            >\r\n              <img src=\"assets/user/images/post/laugh.gif\" />\r\n              <p>Haha</p>\r\n            </a>\r\n            <a\r\n              className=\"emoji\"\r\n              onClick={() => {\r\n                addReaction(\"Wow\", \"wow.gif\");\r\n                setliketext(\"Wow\");\r\n              }}\r\n            >\r\n              <img src=\"assets/user/images/post/wow.gif\" />\r\n              <p>Wow</p>\r\n            </a>\r\n            <a\r\n              className=\"emoji\"\r\n              onClick={() => {\r\n                addReaction(\"Sad\", \"sad.gif\");\r\n                setliketext(\"Sad\");\r\n              }}\r\n            >\r\n              <img src=\"assets/user/images/post/sad.gif\" />\r\n              <p>Sad</p>\r\n            </a>\r\n            <a\r\n              className=\"emoji\"\r\n              onClick={() => {\r\n                addReaction(\"Angry\", \"angry.gif\");\r\n                setliketext(\"Angry\");\r\n              }}\r\n            >\r\n              <img src=\"assets/user/images/post/angry.gif\" />\r\n              <p>Angry</p>\r\n            </a>\r\n          </div>\r\n        )}\r\n        <div class=\"p-4 space-y-3\">\r\n          <div class=\"flex space-x-4 lg:font-bold\">\r\n            {!reacted && (\r\n              <a\r\n                onMouseEnter={() => {\r\n                  setshowReactions(true);\r\n                }}\r\n                onMouseLeave={() => {\r\n                  setTimeout(() => setshowReactions(false), 4000);\r\n                }}\r\n                style={{ cursor: \"pointer\" }}\r\n                class=\"flex items-center space-x-2\"\r\n              >\r\n                <div class=\"p-2 rounded-full text-black lg:bg-gray-100\">\r\n                  <svg\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    viewBox=\"0 0 20 20\"\r\n                    fill=\"currentColor\"\r\n                    width=\"22\"\r\n                    height=\"22\"\r\n                    class=\"dark:text-gray-100\"\r\n                  >\r\n                    <path d=\"M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z\" />\r\n                  </svg>\r\n                </div>\r\n                <div> Like</div>\r\n              </a>\r\n            )}\r\n            {reacted && (\r\n              <a\r\n                onClick={() => {\r\n                  deleteReact(post._id, userconnected);\r\n                }}\r\n                style={{ cursor: \"pointer\" }}\r\n                class=\"flex items-center space-x-2\"\r\n              >\r\n                <div class=\"p-2 rounded-full text-black lg:bg-gray-100\">\r\n                  <svg\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    viewBox=\"0 0 20 20\"\r\n                    fill=\"currentColor\"\r\n                    width=\"22\"\r\n                    height=\"22\"\r\n                    class=\"dark:text-gray-100\"\r\n                  >\r\n                    <path d=\"M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z\" />\r\n                  </svg>\r\n                </div>\r\n\r\n                <div style={{ color: \"#EF4444\" }}> {liketext}</div>\r\n              </a>\r\n            )}\r\n\r\n            <a class=\"flex items-center space-x-2\">\r\n              <div class=\"p-2 rounded-full text-black lg:bg-gray-100\">\r\n                <svg\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  viewBox=\"0 0 20 20\"\r\n                  fill=\"currentColor\"\r\n                  width=\"22\"\r\n                  height=\"22\"\r\n                  class=\"dark:text-gray-100\"\r\n                >\r\n                  <path\r\n                    fill-rule=\"evenodd\"\r\n                    d=\"M18 5v8a2 2 0 01-2 2h-5l-5 4v-4H4a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2zM7 8H5v2h2V8zm2 0h2v2H9V8zm6 0h-2v2h2V8z\"\r\n                    clip-rule=\"evenodd\"\r\n                  />\r\n                </svg>\r\n              </div>\r\n              <div> Comment</div>\r\n            </a>\r\n\r\n            <a class=\"flex items-center space-x-2 flex-1 justify-end\">\r\n              <div class=\"p-2 rounded-full text-black lg:bg-gray-100\">\r\n                <svg\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  viewBox=\"0 0 20 20\"\r\n                  fill=\"currentColor\"\r\n                  width=\"22\"\r\n                  height=\"22\"\r\n                  class=\"dark:text-gray-100\"\r\n                >\r\n                  <path d=\"M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z\" />\r\n                </svg>\r\n              </div>\r\n              <FacebookButton url={url} appId={appId}>\r\n                Share\r\n              </FacebookButton>\r\n            </a>\r\n          </div>\r\n          <div class=\"flex items-center space-x-3 pt-2\">\r\n            <div class=\"flex items-center\">\r\n              <img\r\n                src=\"assets/user/images/avatars/avatar-1.jpg\"\r\n                alt=\"\"\r\n                class=\"w-6 h-6 rounded-full border-2 border-white dark:border-gray-900\"\r\n              />\r\n              <img\r\n                src=\"assets/user/images/post/avatar-4.jpg\"\r\n                alt=\"\"\r\n                class=\"w-6 h-6 rounded-full border-2 border-white dark:border-gray-900 -ml-2\"\r\n              />\r\n              <img\r\n                src=\"assets/user/images/avatars/avatar-2.jpg\"\r\n                alt=\"\"\r\n                class=\"w-6 h-6 rounded-full border-2 border-white dark:border-gray-900 -ml-2\"\r\n              />\r\n            </div>\r\n            <div class=\"dark:text-gray-100\">\r\n              {nbReact} <strong> </strong>\r\n              <button onClick={() => setopenPopupReact(true)}>\r\n                {\" \"}\r\n                <strong> Likes </strong>\r\n              </button>\r\n              {\"    |    \"}\r\n              <strong>{nbComments} </strong>\r\n              comments\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"border-t py-4 space-y-4 dark:border-gray-600\">\r\n            {comments.map((comment) => (\r\n              <CommentItemPost\r\n                showCommentss={showComments}\r\n                key={comment._id}\r\n                comment={comment}\r\n                socket={socket}\r\n              />\r\n            ))}\r\n          </div>\r\n          {loading && <div className=\"loading\"></div>}\r\n          {nbComments - comments.length > 0 && (\r\n            <a onClick={loadMore} class=\"hover:text-blue-600 hover:underline\">\r\n              View {nbComments - comments.length} more Comments\r\n            </a>\r\n          )}\r\n\r\n          {showComments && <FormInputComment id={post._id} socket={socket}></FormInputComment>}\r\n        </div>\r\n      </div>\r\n      <ListReactions\r\n        id={post._id}\r\n        openPopup={openPopupReact}\r\n        setopenPopup={setopenPopupReact}\r\n      ></ListReactions>\r\n\r\n      <EditPostPopup openPopup={openPopup} post={post} setopenPopup={setopenPopup}></EditPostPopup>\r\n    </>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}