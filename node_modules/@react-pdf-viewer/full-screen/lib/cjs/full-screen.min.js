"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),n=require("@react-pdf-viewer/core");function t(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}})),n.default=e,Object.freeze(n)}var r,l=t(e),u=function(){return l.createElement(n.Icon,{size:16},l.createElement("path",{d:"M10.515,9.514h3c0.552,0,1,0.448,1,1v3c0,0.552-0.448,1-1,1h-3c-0.552,0-1-0.448-1-1v-3\n                C9.515,9.962,9.963,9.514,10.515,9.514z\n                M0.531,23.499l6.984-6.985\n                M16.515,7.514L23.5,0.529\n                M21.515,7.514h-5v-5\n                M7.515,21.514v-5 h-5\n                M0.523,0.521l6.992,6.993\n                M16.515,16.514l6.985,6.985\n                M16.515,21.514v-5h5\n                M2.515,7.514h5v-5"}))},c=function(){return(c=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var l in n=arguments[t])Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l]);return e}).apply(this,arguments)},o=function(){return l.createElement(n.Icon,{size:16},l.createElement("path",{d:"M15.5,8.499l8-8\n                M0.5,23.499l8-8\n                M5.5,23.499h-5v-5\n                M23.5,5.499v-5h-5\n                M15.5,15.499l8,8\n                M0.5,0.499l8,8\n                M0.5,5.499v-5h5\n                M18.5,23.499h5v-5"}))},i={left:0,top:8},a=function(e){var t=e.onClick,r=l.useContext(n.LocalizationContext),u=r&&r.fullScreen?r.fullScreen.enterFullScreen:"Full screen";return l.createElement(n.Tooltip,{position:n.Position.BottomCenter,target:l.createElement(n.Button,{onClick:t},l.createElement(o,null)),content:function(){return u},offset:i})};!function(e){e[e.ExitFullScreen=0]="ExitFullScreen",e[e.FullScreenChange=1]="FullScreenChange",e[e.FullScreenElement=2]="FullScreenElement",e[e.FullScreenEnabled=3]="FullScreenEnabled",e[e.RequestFullScreen=4]="RequestFullScreen"}(r||(r={}));var s={ExitFullScreen:"exitFullscreen",FullScreenChange:"fullscreenchange",FullScreenElement:"fullscreenElement",FullScreenEnabled:"fullscreenEnabled",RequestFullScreen:"requestFullscreen"},f={ExitFullScreen:"webkitExitFullscreen",FullScreenChange:"webkitfullscreenchange",FullScreenElement:"webkitFullscreenElement",FullScreenEnabled:"webkitFullscreenEnabled",RequestFullScreen:"webkitRequestFullscreen"},E={ExitFullScreen:"msExitFullscreen",FullScreenChange:"MSFullscreenChange",FullScreenElement:"msFullscreenElement",FullScreenEnabled:"msFullscreenEnabled",RequestFullScreen:"msRequestFullscreen"},F="undefined"!=typeof window,S=F&&(r.FullScreenEnabled in document&&s||f.FullScreenEnabled in document&&f||E.FullScreenEnabled in document&&E)||s,m=function(e){return F?e[S.ExitFullScreen]():Promise.resolve({})},v=function(){return F?document[S.FullScreenElement]:null},d=function(e){var n=e.children,t=e.store,r=e.onEnterFullScreen,u=e.onExitFullScreen,c=l.useRef(t.get("getPagesContainer")?t.get("getPagesContainer")():null),o=function(){var e=v()===c.current;t.update("isFullScreen",e);var n=t.get("zoom");n&&(e?r(n):u(n))},i=function(e){var n;c.current=e(),n=o,F&&document.addEventListener(S.FullScreenChange,n)};l.useEffect((function(){return t.subscribe("getPagesContainer",i),function(){t.unsubscribe("getPagesContainer",i)}}),[]);return(n||function(e){return l.createElement(a,{onClick:e.onClick})})({onClick:function(){var e=c.current;e&&function(){var e=c.current;if(!e)return Promise.resolve();var n=v();return n&&n!==e?m(n):Promise.resolve()}().then((function(){var n;n=e,F&&n[S.RequestFullScreen]()}))}})},b=function(e){var t=e.store,r=l.useState(!1),c=r[0],o=r[1],i=function(e){o(e)};return l.useEffect((function(){return t.subscribe("isFullScreen",i),function(){t.unsubscribe("isFullScreen",i)}}),[]),l.createElement(l.Fragment,null,c&&l.createElement("div",{className:"rpv-full-screen-exit-button"},l.createElement("div",{className:"rpv-full-screen-exit-button-inner"},l.createElement(n.Button,{onClick:function(){o(!1);var e=t.get("getPagesContainer");if(e){var n=e();if(n){var r=v();r&&r===n&&m(document)}}}},l.createElement(u,null)))))};exports.ExitFullScreenIcon=u,exports.FullScreenIcon=o,exports.fullScreenPlugin=function(e){var t=l.useMemo((function(){return n.createStore({})}),[]),r=e&&e.onEnterFullScreen?e.onEnterFullScreen:function(){},u=e&&e.onExitFullScreen?e.onExitFullScreen:function(){},o=function(e){return l.createElement(d,c({},e,{store:t,onEnterFullScreen:r,onExitFullScreen:u}))},i=function(){return l.createElement(b,{store:t})};return{install:function(e){t.update("getPagesContainer",e.getPagesContainer),t.update("zoom",e.zoom)},renderViewer:function(e){var n=e.slot;return n.subSlot&&(n.subSlot.children=l.createElement(l.Fragment,null,l.createElement(i,null),n.subSlot.children)),n},EnterFullScreen:o,EnterFullScreenButton:function(){return l.createElement(o,null,(function(e){return l.createElement(a,c({},e))}))}}};
