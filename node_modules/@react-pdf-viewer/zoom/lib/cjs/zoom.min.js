"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("@react-pdf-viewer/core");function n(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var o=n(e),r=function(){return o.createElement(t.Icon,{size:16},o.createElement("path",{d:"M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z\n                M23.5,23.499\n                l-5.929-5.929\n                M5.5,10.499h10\n                M10.5,5.499v10"}))},c=function(){return o.createElement(t.Icon,{size:16},o.createElement("path",{d:"M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z\n                M23.5,23.499\n                l-5.929-5.929\n                M5.5,10.499h10"}))},a=function(){return(a=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},u=function(e){var t=o.useState(e.get("scale")||0),n=t[0],r=t[1],c=function(e){r(e)};return o.useEffect((function(){return e.subscribe("scale",c),function(){e.unsubscribe("scale",c)}}),[]),{scale:n}},i=function(e){var t=e.children,n=e.store;return(t||function(e){return o.createElement(o.Fragment,null,Math.round(100*e.scale)+"%")})({scale:u(n).scale})},l=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],m=function(e){return l.find((function(t){return t>e}))||e},s=function(e){var t=l.findIndex((function(t){return t>=e}));return-1===t||0===t?e:l[t-1]},f=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),p=function(e){var t=e.containerRef,n=e.store,r=function(e){if(!e.shiftKey&&!e.altKey&&(f?e.metaKey:e.ctrlKey)){var o=t.current;if(o&&document.activeElement&&document.activeElement.contains(o)){var r=n.get("zoom");if(r){var c=n.get("scale")||1,a=1;switch(e.key){case"-":a=s(c);break;case"=":a=m(c);break;case"0":a=1;break;default:a=c}a!==c&&(e.preventDefault(),r(a))}}}};return o.useEffect((function(){if(t.current)return document.addEventListener("keydown",r),function(){document.removeEventListener("keydown",r)}}),[t.current]),o.createElement(o.Fragment,null)},v=[.5,.75,1,1.25,1.5,2,3,4],E={left:0,top:8},d=function(e){var n=e.scale,r=e.onZoom,c=o.useContext(t.LocalizationContext);return o.createElement(t.Popover,{position:t.Position.BottomCenter,target:function(e){return o.createElement("span",{className:"rpv-zoom-popover-target",onClick:function(){e()}},o.createElement("span",{className:"rpv-zoom-popover-target-scale"},Math.round(100*n),"%"),o.createElement("span",{className:"rpv-zoom-popover-target-arrow"}))},content:function(e){return o.createElement(t.Menu,null,Object.keys(t.SpecialZoomLevel).map((function(n){var a=n;return o.createElement(t.MenuItem,{key:a,onClick:function(){e(),r(a)}},function(e){switch(e){case t.SpecialZoomLevel.ActualSize:return c&&c.zoom?c.zoom.actualSize:"Actual size";case t.SpecialZoomLevel.PageFit:return c&&c.zoom?c.zoom.pageFit:"Page fit";case t.SpecialZoomLevel.PageWidth:return c&&c.zoom?c.zoom.pageWidth:"Page width"}}(a))})),o.createElement(t.MenuDivider,null),v.map((function(n){return o.createElement(t.MenuItem,{key:n,onClick:function(){e(),r(n)}},Math.round(100*n)+"%")})))},offset:E,closeOnClickOutside:!0,closeOnEscape:!0})},z=function(e){var t=e.children,n=e.store;return(t||function(e){return o.createElement(d,{scale:e.scale,onZoom:e.onZoom})})({scale:u(n).scale,onZoom:function(e){var t=n.get("zoom");t&&t(e)}})},g={left:0,top:8},h=function(e){var n=e.onClick,c=o.useContext(t.LocalizationContext),a=c&&c.zoom?c.zoom.zoomIn:"Zoom in";return o.createElement(t.Tooltip,{position:t.Position.BottomCenter,target:o.createElement(t.Button,{onClick:n},o.createElement(r,null)),content:function(){return a},offset:g})},C=function(e){var t=e.children,n=e.store,r=u(n).scale;return(t||function(e){return o.createElement(h,{onClick:e.onClick})})({onClick:function(){var e=n.get("zoom");e&&e(m(r))}})},k={left:0,top:8},M=function(e){var n=e.onClick,r=o.useContext(t.LocalizationContext),a=r&&r.zoom?r.zoom.zoomOut:"Zoom out";return o.createElement(t.Tooltip,{position:t.Position.BottomCenter,target:o.createElement(t.Button,{onClick:n},o.createElement(c,null)),content:function(){return a},offset:k})},O=function(e){var t=e.children,n=e.store,r=u(n).scale;return(t||function(e){return o.createElement(M,{onClick:e.onClick})})({onClick:function(){var e=n.get("zoom");e&&e(s(r))}})};exports.ZoomInIcon=r,exports.ZoomOutIcon=c,exports.zoomPlugin=function(){var e=o.useMemo((function(){return t.createStore({})}),[]),n=function(t){return o.createElement(C,a({},t,{store:e}))},r=function(t){return o.createElement(O,a({},t,{store:e}))},c=function(t){return o.createElement(z,a({},t,{store:e}))};return{renderViewer:function(t){var n=t.slot,r={children:o.createElement(o.Fragment,null,o.createElement(p,{containerRef:t.containerRef,store:e}),n.children)};return a(a({},n),r)},install:function(t){e.update("zoom",t.zoom)},onViewerStateChange:function(t){return e.update("scale",t.scale),t},zoomTo:function(t){var n=e.get("zoom");n&&n(t)},CurrentScale:function(t){return o.createElement(i,a({},t,{store:e}))},ZoomIn:n,ZoomInButton:function(){return o.createElement(n,null,(function(e){return o.createElement(h,a({},e))}))},ZoomOut:r,ZoomOutButton:function(){return o.createElement(r,null,(function(e){return o.createElement(M,a({},e))}))},Zoom:c,ZoomPopover:function(){return o.createElement(c,null,(function(e){return o.createElement(d,a({},e))}))}}};
